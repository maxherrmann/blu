{"version":3,"file":"blu.esm.min.js","mappings":"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","sources":["webpack://@blu.js/blu/./src/bluetooth.js","webpack://@blu.js/blu/./src/characteristic.js","webpack://@blu.js/blu/./src/configuration.js","webpack://@blu.js/blu/./src/descriptions.js","webpack://@blu.js/blu/./src/descriptor.js","webpack://@blu.js/blu/./src/device.js","webpack://@blu.js/blu/./src/gattOperationQueue.js","webpack://@blu.js/blu/./src/logger.js","webpack://@blu.js/blu/./src/request.js","webpack://@blu.js/blu/./src/response.js","webpack://@blu.js/blu/./src/scanner.js","webpack://@blu.js/blu/./src/service.js","webpack://@blu.js/blu/./src/version.js","webpack://@blu.js/blu/./utils/bluError.js","webpack://@blu.js/blu/./utils/eventEmitter.js","webpack://@blu.js/blu/./utils/isArray.js","webpack://@blu.js/blu/./utils/isSubclass.js","webpack://@blu.js/blu/./utils/isTypedArray.js","webpack://@blu.js/blu/./utils/logger.js","webpack://@blu.js/blu/webpack/bootstrap","webpack://@blu.js/blu/webpack/runtime/compat get default export","webpack://@blu.js/blu/webpack/runtime/define property getters","webpack://@blu.js/blu/webpack/runtime/hasOwnProperty shorthand","webpack://@blu.js/blu/./blu.esm.js"],"sourcesContent":["const EventEmitter = require(\"../utils/eventEmitter.js\")\n\nclass Bluetooth extends EventEmitter {\n\t#connectedDevices = new Set()\n\t#isDataTransferLoggingEnabled = false\n\n\tconstructor() {\n\t\tsuper(true)\n\n\t\tthis.addChannel(\"bluetooth-enabled\")\n\t\tthis.addChannel(\"bluetooth-disabled\")\n\n\t\tthis.addChannel(\"device-connected\")\n\t\tthis.addChannel(\"device-connection-lost\")\n\t\tthis.addChannel(\"device-disconnected\")\n\n\t\tif (this.isSupported) {\n\t\t\tglobalThis.navigator.bluetooth.addEventListener(\"availabilitychanged\", event => {\n\t\t\t\tthis.emit(\n\t\t\t\t\tevent.value ?\n\t\t\t\t\t\"bluetooth-enabled\" :\n\t\t\t\t\t\"bluetooth-disabled\"\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tthis.on(\"bluetooth-disabled\", () => {\n\t\t\t\tthis.#connectedDevices.clear()\n\t\t\t})\n\n\t\t\tthis.on(\"device-connected\", device => {\n\t\t\t\tthis.#connectedDevices.add(device)\n\t\t\t})\n\n\t\t\tthis.on(\"device-disconnected\", device => {\n\t\t\t\tthis.#connectedDevices.delete(device)\n\t\t\t})\n\t\t}\n\t}\n\n\tget isSupported() {\n\t\treturn !!globalThis.navigator?.bluetooth\n\t}\n\n\tget isDataTransferLoggingEnabled() {\n\t\treturn this.#isDataTransferLoggingEnabled\n\t}\n\n\tget connectedDevices() {\n\t\treturn Array.from(this.#connectedDevices)\n\t}\n\n\tget connectedDevice() {\n\t\treturn this.connectedDevices[this.connectedDevices.length - 1] ?? null\n\t}\n\n\tisAvailable() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (this.isSupported) {\n\t\t\t\tglobalThis.navigator.bluetooth.getAvailability()\n\t\t\t\t.then(available => {\n\t\t\t\t\tresolve(available)\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(false)\n\t\t\t}\n\t\t})\n\t}\n\n\tenableDataTransferLogging() {\n\t\tthis.#isDataTransferLoggingEnabled = true\n\t}\n\n\tdisableDataTransferLogging() {\n\t\tthis.#isDataTransferLoggingEnabled = false\n\t}\n}\n\nmodule.exports = new Bluetooth()","const logger = require(\"./logger.js\")\nconst Bluetooth = require(\"./bluetooth.js\")\n\nconst Request = require(\"./request.js\")\nconst Response = require(\"./response.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\nconst EventEmitter = require(\"../utils/eventEmitter.js\")\nconst isArray = require(\"../utils/isArray.js\")\nconst isTypedArray = require(\"../utils/isTypedArray.js\")\n\nclass Characteristic extends EventEmitter {\n\tservice\n\tdescription\n\tproperties\n\tdescriptors\n\tresponseType = Response\n\n\t_bluetoothCharacteristic\n\n\tconstructor(service, bluetoothCharacteristic, description) {\n\t\tsuper()\n\n\t\tthis.service = service\n\t\tthis.description = description\n\t\tthis.properties = new CharacteristicProperties(\n\t\t\tbluetoothCharacteristic.properties\n\t\t)\n\t\tthis.descriptors = []\n\n\t\tthis._bluetoothCharacteristic = bluetoothCharacteristic\n\n\t\tthis.on(\"notification\", response => {\n\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\tlogger.target.debug(\n\t\t\t\t\t`${this.description.name}: Notification received:`,\n\t\t\t\t\tresponse\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothCharacteristic.uuid\n\t}\n\n\tget value() {\n\t\treturn this._bluetoothCharacteristic.value\n\t}\n\n\tget hasExpectedProperties() {\n\t\tif (this.description === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\treturn this.properties.string === this.description.expectedIndicators\n\t}\n\n\tasync onceReady() {}\n\n\treadValue() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.read) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot read from a non-readable characteristic.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.readValue()\n\t\t\t\t})\n\n\t\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Read value:`,\n\t\t\t\t\t\tthis.value\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tresolve(this.value)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot read value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tread(responseProperty) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof responseProperty !== \"string\") {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"responseProperty\" must be of type \"string\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet value = await this.readValue()\n\n\t\t\t\tresolve(new this.responseType(value)[responseProperty])\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\twrite(value, withoutResponse = false) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (withoutResponse && !this.properties.writeWithoutResponse) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot write without response to a characteristic ` +\n\t\t\t\t\t\t`that is not writable without response.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!withoutResponse && !this.properties.write) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot write to a non-writable characteristic.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!isTypedArray(value)) {\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tif (!value.every(entry => typeof entry === \"number\")) {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be an array of items ` +\n\t\t\t\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array(value)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (typeof value !== \"number\") {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array([value])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Write:`,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tif (withoutResponse) {\n\t\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\t\treturn this._bluetoothCharacteristic.writeValueWithoutResponse(value)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\t\treturn this._bluetoothCharacteristic.writeValueWithResponse(value)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot write value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\trequest(request, timeout = REQUEST_TIMEOUT) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!(request instanceof Request)) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"request\" must be a valid instance of \"Request\". ` +\n\t\t\t\t\t\t`Got \"${request?.constructor.name}\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttimeout !== undefined &&\n\t\t\t\ttimeout !== null &&\n\t\t\t\ttypeof timeout !== \"number\"\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"timeout\" must be either \"undefined\", \"null\" or ` +\n\t\t\t\t\t\t`of type \"number\". `\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\tlogger.target.debug(\n\t\t\t\t\t`${this.description.name}: Request:`,\n\t\t\t\t\trequest\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tlet onResponse = response => {\n\t\t\t\tif (request.responseType.validatorFunction(response)) {\n\t\t\t\t\tclearTimeout(timeoutTimer)\n\n\t\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\t\tresolve(new request.responseType(response.data))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.on(\"notification\", onResponse)\n\n\t\t\tif (timeout) {\n\t\t\t\tvar timeoutTimer = setTimeout(() => {\n\t\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew NotificationTimeoutError(\n\t\t\t\t\t\t\t`Did not receive an expected notification ` +\n\t\t\t\t\t\t\t`from the device within ${timeout} ms.`\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t}, timeout)\n\t\t\t}\n\n\t\t\tthis.write(request.data)\n\t\t\t.catch(error => {\n\t\t\t\tclearTimeout(timeoutTimer)\n\n\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot request from characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t})\n\t\t})\n\t}\n\n\trequestAll(requests, timeout = REQUEST_TIMEOUT) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (\n\t\t\t\t!isArray(requests) ||\n\t\t\t\t!requests.every(request => request instanceof Request)\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"requests\" must be an array of instances of \"Request\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttimeout !== undefined &&\n\t\t\t\ttimeout !== null &&\n\t\t\t\ttypeof timeout !== \"number\"\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"timeout\" must be either \"undefined\", \"null\" or ` +\n\t\t\t\t\t\t`of type \"number\". `\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet responses = []\n\n\t\t\t\tfor (const request of requests) {\n\t\t\t\t\tresponses.push(await this.request(request, timeout))\n\t\t\t\t}\n\n\t\t\t\tresolve(responses)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\tstartListeningForNotifications() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.notify) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot start listening to a non-notifying characteristic.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.startNotifications()\n\t\t\t\t})\n\n\t\t\t\tthis._bluetoothCharacteristic.addEventListener(\n\t\t\t\t\t\"characteristicvaluechanged\",\n\t\t\t\t\tthis.#onNotification.bind(this)\n\t\t\t\t)\n\n\t\t\t\tthis.properties.isListening = true\n\n\t\t\t\tlogger.debug(\"Started listening for notifications.\", this)\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot start listening to characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tstopListeningForNotifications() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.isListening) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot stop listening to a characteristic that is not yet listened to.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.stopNotifications()\n\t\t\t\t})\n\n\t\t\t\tthis._bluetoothCharacteristic.removeEventListener(\n\t\t\t\t\t\"characteristicvaluechanged\",\n\t\t\t\t\tthis.#onNotification.bind(this)\n\t\t\t\t)\n\n\t\t\t\tthis.properties.isListening = false\n\n\t\t\t\tlogger.debug(\"Stopped listening for notifications.\", this)\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot stop listening to characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\t#onNotification() {\n\t\tthis.emit(\"notification\", new this.responseType(this.value))\n\t}\n}\n\nconst REQUEST_TIMEOUT = 5000\n\nclass CharacteristicProperties {\n\tread\n\twrite\n\twriteWithoutResponse\n\tnotify\n\n\tconstructor(bluetoothCharacteristicProperties) {\n\t\tthis.read = bluetoothCharacteristicProperties.read\n\t\tthis.write = bluetoothCharacteristicProperties.write\n\t\tthis.writeWithoutResponse = bluetoothCharacteristicProperties.writeWithoutResponse\n\t\tthis.notify = bluetoothCharacteristicProperties.notify\n\n\t\tif (this.notify) {\n\t\t\tthis.isListening = false\n\t\t}\n\t}\n\n\tget string() {\n\t\treturn this.toString()\n\t}\n\n\ttoString() {\n\t\tlet indicators = [\n\t\t\tthis.read ? \"R\" : \"-\",\n\t\t\tthis.write ? \"W\" : \"-\",\n\t\t\tthis.writeWithoutResponse ? \"w\" : \"-\",\n\t\t\tthis.notify ? \"N\" : \"-\"\n\t\t]\n\n\t\treturn indicators.join(\"\")\n\t}\n}\n\nclass CharacteristicOperationError extends BluError {\n\tcharacteristic\n\n\tconstructor(characteristic, message, underlyingError) {\n\t\tsuper(message, underlyingError)\n\n\t\tthis.characteristic = characteristic\n\t}\n}\n\nclass NotificationTimeoutError extends BluError {}\n\nmodule.exports = Characteristic","const Device = require(\"./device.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\nconst isSubclass = require(\"../utils/isSubclass.js\")\n\nclass Configuration {\n\t#scannerConfig\n\t#deviceType\n\t#ensureCompleteDeviceBluetoothInterface\n\t#autoListenToNotifiableCharacteristics\n\n\tconstructor() {\n\t\tthis.restoreDefaults()\n\t}\n\n\tget scannerConfig() {\n\t\treturn this.#scannerConfig\n\t}\n\n\tget deviceType() {\n\t\treturn this.#deviceType\n\t}\n\n\tget ensureCompleteDeviceBluetoothInterface() {\n\t\treturn this.#ensureCompleteDeviceBluetoothInterface\n\t}\n\n\tget autoListenToNotifiableCharacteristics() {\n\t\treturn this.#autoListenToNotifiableCharacteristics\n\t}\n\n\trestoreDefaults() {\n\t\tthis.#scannerConfig = { acceptAllDevices: true }\n\t\tthis.#deviceType = Device\n\t\tthis.#ensureCompleteDeviceBluetoothInterface = true\n\t\tthis.#autoListenToNotifiableCharacteristics = true\n\t}\n\n\tuse(scannerConfig, deviceType) {\n\t\tif (scannerConfig) {\n\t\t\tthis.useScannerConfig(scannerConfig)\n\t\t}\n\n\t\tif (deviceType) {\n\t\t\tthis.useDeviceType(deviceType)\n\t\t}\n\t}\n\n\tuseScannerConfig(scannerConfig) {\n\t\tif (typeof scannerConfig !== \"object\") {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"scannerConfig\" must be an object.`\n\t\t\t)\n\t\t}\n\n\t\t// TODO: Validate scannerConfig here once it is typed.\n\t\t// See: https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth/requestDevice#parameters\n\n\t\tthis.#scannerConfig = scannerConfig\n\t}\n\n\tuseDeviceType(deviceType) {\n\t\tif (!isSubclass(deviceType, Device)) {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"deviceType\" must be ` +\n\t\t\t\t`a class that is or extends \"Device\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#deviceType = deviceType\n\t}\n\n\tset(configuration) {\n\t\tif (typeof configuration !== \"object\") {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"configuration\" must be an object.`\n\t\t\t)\n\t\t}\n\n\t\tlet value\n\n\t\tif (value = configuration.ensureCompleteDeviceBluetoothInterface) {\n\t\t\tif (typeof value !== \"boolean\") {\n\t\t\t\tthrow new BluConfigurationError(\n\t\t\t\t\t`Configuration property \"ensureCompleteDeviceBluetoothInterface\" ` +\n\t\t\t\t\t`must be of type \"boolean\".`\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.#ensureCompleteDeviceBluetoothInterface = value\n\t\t}\n\n\t\tif (value = configuration.autoListenToNotifiableCharacteristics) {\n\t\t\tif (typeof value !== \"boolean\") {\n\t\t\t\tthrow new BluConfigurationError(\n\t\t\t\t\t`Configuration property \"autoListenToNotifiableCharacteristics\" ` +\n\t\t\t\t\t`must be of type \"boolean\".`\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.#autoListenToNotifiableCharacteristics = value\n\t\t}\n\t}\n}\n\nclass BluConfigurationError extends BluError {}\n\nmodule.exports = new Configuration()","const Service = require(\"./service.js\")\nconst Characteristic = require(\"./characteristic.js\")\nconst Descriptor = require(\"./descriptor.js\")\n\nconst isArray = require(\"../utils/isArray.js\")\nconst isSubclass = require(\"../utils/isSubclass.js\")\nconst BluError = require(\"../utils/bluError.js\")\n\nclass ServiceDescription {\n\tname\n\tidentifier\n\ttype\n\tuuid\n\tcharacteristics\n\n\tconstructor(name, identifier, type, uuid, characteristicDescriptions) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"name\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof identifier !== \"string\") {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"identifier\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (!isSubclass(type, Service)) {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Service\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid !== \"string\" && typeof uuid !== \"number\") {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"uuid\" must be either of type \"string\" or \"number\".`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\t!isArray(characteristicDescriptions) ||\n\t\t\t!characteristicDescriptions.every(characteristicDescription =>\n\t\t\t\tcharacteristicDescription instanceof CharacteristicDescription\n\t\t\t)\n\t\t) {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"characteristicDescriptions\" must be an array ` +\n\t\t\t\t`of \"CharacteristicDescription\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid === \"string\") {\n\t\t\tuuid = uuid.toLowerCase()\n\t\t}\n\n\t\tthis.name = name\n\t\tthis.identifier = identifier\n\t\tthis.type = type\n\t\tthis.uuid = uuid\n\t\tthis.characteristics = characteristicDescriptions\n\t}\n}\n\nclass CharacteristicDescription {\n\tname\n\tidentifier\n\ttype\n\tuuid\n\tdescriptors\n\texpectedIndicators\n\n\tconstructor(name, identifier, type, uuid, descriptorDescriptions, expectedIndicators) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"name\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof identifier !== \"string\") {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"identifier\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (!isSubclass(type, Characteristic)) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Characteristic\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid !== \"string\" && typeof uuid !== \"number\") {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"uuid\" must be either of type \"string\" or \"number\".`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\t!isArray(descriptorDescriptions) ||\n\t\t\t!descriptorDescriptions.every(descriptorDescription =>\n\t\t\t\tdescriptorDescription instanceof DescriptorDescription\n\t\t\t)\n\t\t) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"descriptorDescriptions\" must be an array ` +\n\t\t\t\t`of \"DescriptorDescription\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof expectedIndicators !== \"string\") {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"expectedIndicators\" must be either \"undefined\" ` +\n\t\t\t\t`or of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (!expectedIndicators.match(/^[R-][W-][w-][N-]$/)) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"expectedIndicators\" contains a string ` +\n\t\t\t\t`that is incorrectly formatted.`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid === \"string\") {\n\t\t\tuuid = uuid.toLowerCase()\n\t\t}\n\n\t\tthis.name = name\n\t\tthis.identifier = identifier\n\t\tthis.type = type\n\t\tthis.uuid = uuid\n\t\tthis.descriptors = descriptorDescriptions\n\t\tthis.expectedIndicators = expectedIndicators ?? null\n\t}\n}\n\nclass DescriptorDescription {\n\tname\n\tidentifier\n\ttype\n\tuuid\n\n\tconstructor(name, identifier, type, uuid) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new DescriptorDescriptionConstructionError(\n\t\t\t\t`Argument \"name\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof identifier !== \"string\") {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"identifier\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (!isSubclass(type, Descriptor)) {\n\t\t\tthrow new DescriptorDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Descriptor\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid !== \"string\" && typeof uuid !== \"number\") {\n\t\t\tthrow new DescriptorDescriptionConstructionError(\n\t\t\t\t`Argument \"uuid\" must be either of type \"string\" or \"number\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid === \"string\") {\n\t\t\tuuid = uuid.toLowerCase()\n\t\t}\n\n\t\tthis.name = name\n\t\tthis.identifier = identifier\n\t\tthis.type = type\n\t\tthis.uuid = uuid\n\t}\n}\n\nclass ServiceDescriptionConstructionError extends BluError {}\nclass CharacteristicDescriptionConstructionError extends BluError {}\nclass DescriptorDescriptionConstructionError extends BluError {}\n\nmodule.exports = {\n\tServiceDescription: ServiceDescription,\n\tCharacteristicDescription: CharacteristicDescription,\n\tDescriptorDescription: DescriptorDescription\n}","const logger = require(\"./logger.js\")\nconst Bluetooth = require(\"./bluetooth.js\")\n\nconst Response = require(\"./response.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\nconst isArray = require(\"../utils/isArray.js\")\nconst isTypedArray = require(\"../utils/isTypedArray.js\")\n\nclass Descriptor {\n\tcharacteristic\n\tdescription\n\tresponseType = Response\n\n\t_bluetoothDescriptor\n\n\tconstructor(characteristic, bluetoothDescriptor, description) {\n\t\tthis.characteristic = characteristic\n\t\tthis.description = description\n\n\t\tthis._bluetoothDescriptor = bluetoothDescriptor\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothDescriptor.uuid\n\t}\n\n\tget value() {\n\t\treturn this._bluetoothDescriptor.value\n\t}\n\n\tasync onceReady() {}\n\n\treadValue() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tawait this.characteristic.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothDescriptor.readValue()\n\t\t\t\t})\n\n\t\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Read value:`,\n\t\t\t\t\t\tthis.value\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tresolve(this.value)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot read value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tread(responseProperty) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof responseProperty !== \"string\") {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"responseProperty\" must be of type \"string\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet value = await this.readValue()\n\n\t\t\t\tresolve(new this.responseType(value)[responseProperty])\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\twrite(value) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!isTypedArray(value)) {\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tif (!value.every(entry => typeof entry === \"number\")) {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be an array of items ` +\n\t\t\t\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array(value)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (typeof value !== \"number\") {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array([value])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (Bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Write:`,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tawait this.characteristic.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothDescriptor.writeValue(value)\n\t\t\t\t})\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot write value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass DescriptorOperationError extends BluError {\n\tdescriptor\n\n\tconstructor(descriptor, message, underlyingError) {\n\t\tsuper(message, underlyingError)\n\n\t\tthis.descriptor = descriptor\n\t}\n}\n\nmodule.exports = Descriptor","const logger = require(\"./logger.js\")\nconst configuration = require(\"./configuration.js\")\nconst Bluetooth = require(\"./bluetooth.js\")\nconst Service = require(\"./service.js\")\nconst Characteristic = require(\"./characteristic.js\")\nconst Descriptor = require(\"./descriptor.js\")\nconst GATTOperationQueue = require(\"./gattOperationQueue.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\nconst EventEmitter = require(\"../utils/eventEmitter.js\")\n\nclass Device extends EventEmitter {\n\tid\n\tname\n\tproperties\n\tservices = []\n\tserviceDescriptions = []\n\n\t_bluetoothDevice\n\n\t#gattOperationQueue = new GATTOperationQueue()\n\t#willDisconnect = false\n\n\tconstructor(bluetoothDevice) {\n\t\tsuper(true)\n\n\t\tthis.id = bluetoothDevice.id\n\t\tthis.name = bluetoothDevice.name\n\n\t\tthis._bluetoothDevice = bluetoothDevice\n\n\t\tthis.addChannel(\"advertised\")\n\t\tthis.addChannel(\"connected\")\n\t\tthis.addChannel(\"connection-lost\")\n\t\tthis.addChannel(\"disconnected\")\n\n\t\tthis.#initialize()\n\t}\n\n\tget characteristics() {\n\t\tlet characteristics = []\n\n\t\tfor (const service of this.services) {\n\t\t\tcharacteristics.push(...service.characteristics)\n\t\t}\n\n\t\treturn characteristics\n\t}\n\n\tget isConnected() {\n\t\treturn this._bluetoothDevice.gatt.connected\n\t}\n\n\tasync onceReady() {}\n\n\tconnect() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tawait this._bluetoothDevice.gatt.connect()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceConnectionError(\n\t\t\t\t\t\t\"Could not connect to device.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.#discoverBluetoothInterface()\n\n\t\t\t\tthis._bluetoothDevice.addEventListener(\n\t\t\t\t\t\"gattserverdisconnected\",\n\t\t\t\t\tthis.#onDisconnected.bind(this),\n\t\t\t\t\t{ once: true }\n\t\t\t\t)\n\n\t\t\t\tthis._bluetoothDevice.addEventListener(\n\t\t\t\t\t\"gattserverdisconnected\",\n\t\t\t\t\tthis.#onConnectionLost.bind(this),\n\t\t\t\t\t{ once: true }\n\t\t\t\t)\n\n\t\t\t\tawait this.onceReady()\n\n\t\t\t\tthis.emit(\"connected\")\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\tdisconnect() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tthis.#willDisconnect = true\n\n\t\t\ttry {\n\t\t\t\tawait this._bluetoothDevice.gatt.disconnect()\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceConnectionError(\n\t\t\t\t\t\t\"Could not disconnect from device.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.#willDisconnect = false\n\t\t})\n\t}\n\n\tperformGATTOperation(callback) {\n\t\treturn this.#gattOperationQueue.await(callback)\n\t}\n\n\tasync #initialize() {\n\t\tthis.on(\"connected\", () => {\n\t\t\tlogger.log(\"Connected.\", this)\n\t\t\tBluetooth.emit(\"device-connected\", this)\n\t\t})\n\n\t\tthis.on(\"connection-lost\", () => {\n\t\t\tlogger.warn(\"Connection lost.\", this)\n\t\t\tBluetooth.emit(\"device-connection-lost\", this)\n\t\t})\n\n\t\tthis.on(\"disconnected\", () => {\n\t\t\tlogger.log(\"Disconnected.\", this)\n\t\t\tBluetooth.emit(\"device-disconnected\", this)\n\t\t})\n\n\t\tif (typeof this._bluetoothDevice.watchAdvertisements === \"function\") {\n\t\t\t// Experimental feature.\n\t\t\t// Compatibility: https://developer.mozilla.org/en-US/docs/Web/API/BluetoothDevice#browser_compatibility\n\n\t\t\ttry {\n\t\t\t\tthis._bluetoothDevice.addEventListener(\"advertisementreceived\", event => {\n\t\t\t\t\t// TODO: Create custom event.\n\t\t\t\t\tthis.emit(\"advertised\", event)\n\t\t\t\t})\n\n\t\t\t\tawait this._bluetoothDevice.watchAdvertisements()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\tlogger.warn(\n\t\t\t\t\tnew DeviceOperationError(\n\t\t\t\t\t\t\"Could not start watching for advertisements.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\tasync #discoverBluetoothInterface() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tlet interfaceIncomplete = false\n\n\t\t\t\tfor (const serviceDescription of this.serviceDescriptions) {\n\t\t\t\t\tlet service\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tservice = new serviceDescription.type(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\tawait this._bluetoothDevice.gatt.getPrimaryService(\n\t\t\t\t\t\t\t\tserviceDescription.uuid\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tserviceDescription\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tif (serviceDescription.type !== Service) {\n\t\t\t\t\t\t\tthis[service.description.identifier] = service\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.services.push(service)\n\t\t\t\t\t}\n\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t`Could not discover \"${serviceDescription.name}\".`,\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\tif (service) {\n\t\t\t\t\t\tfor (const characteristicDescription of serviceDescription.characteristics) {\n\t\t\t\t\t\t\tlet characteristic\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcharacteristic = new characteristicDescription.type(\n\t\t\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\t\t\tawait service._bluetoothService.getCharacteristic(\n\t\t\t\t\t\t\t\t\t\tcharacteristicDescription.uuid\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcharacteristicDescription\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\tif (characteristicDescription.type !== Characteristic) {\n\t\t\t\t\t\t\t\t\tservice[characteristic.description.identifier] = characteristic\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tservice.characteristics.push(characteristic)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t\t\t`Could not discover \"${characteristicDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t`in \"${serviceDescription.name}\".`,\n\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (characteristic) {\n\t\t\t\t\t\t\t\tfor (const descriptorDescription of characteristicDescription.descriptors) {\n\t\t\t\t\t\t\t\t\tlet descriptor\n\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tdescriptor = new descriptorDescription.type(\n\t\t\t\t\t\t\t\t\t\t\tcharacteristic,\n\t\t\t\t\t\t\t\t\t\t\tawait characteristic._bluetoothCharacteristic.getDescriptor(\n\t\t\t\t\t\t\t\t\t\t\t\tdescriptorDescription.uuid\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tdescriptorDescription\n\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\tif (descriptorDescription.type !== Descriptor) {\n\t\t\t\t\t\t\t\t\t\t\tcharacteristic[descriptor.description.identifier] = descriptor\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcharacteristic.descriptors.push(descriptor)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t\t\t\t\t`Could not discover \"${descriptorDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t\t\t`in \"${characteristicDescription.name}\".`,\n\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (configuration.ensureCompleteDeviceBluetoothInterface && interfaceIncomplete) {\n\t\t\t\t\tthrow new DeviceBluetoothInterfaceIncompleteError(\n\t\t\t\t\t\t`The devices Bluetooth interface is incomplete. ` +\n\t\t\t\t\t\t`Make sure that your service descriptions are correct or configure ` +\n\t\t\t\t\t\t`Blu to ignore incomplete device Bluetooth interfaces by setting the ` +\n\t\t\t\t\t\t`configuration property \"ensureCompleteDeviceBluetoothInterface\" ` +\n\t\t\t\t\t\t`to \"false\" before calling \"device.connect()\".`\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tlet services = await this._bluetoothDevice.gatt.getPrimaryServices()\n\n\t\t\t\tfor (let service of services) {\n\t\t\t\t\tservice = new Service(this, service)\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!this.services.find(describedService => {\n\t\t\t\t\t\t\treturn describedService.uuid === service.uuid\n\t\t\t\t\t\t})\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.services.push(service)\n\t\t\t\t\t}\n\n\t\t\t\t\tlet characteristics = await service._bluetoothService.getCharacteristics()\n\n\t\t\t\t\tfor (let characteristic of characteristics) {\n\t\t\t\t\t\tcharacteristic = new Characteristic(service, characteristic)\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!service.characteristics.find(describedCharacteristic => {\n\t\t\t\t\t\t\t\treturn describedCharacteristic.uuid === characteristic.uuid\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tservice.characteristics.push(characteristic)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar descriptors = await characteristic._bluetoothCharacteristic.getDescriptors()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\tif (error.name === \"NotFoundError\") {\n\t\t\t\t\t\t\t\tdescriptors = []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrow new DescriptorDiscoveryError(\n\t\t\t\t\t\t\t\t\t`Could not discover descriptors of characteristic with UUID ` +\n\t\t\t\t\t\t\t\t\t`\"${characteristic.uuid}\".`,\n\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let descriptor of descriptors) {\n\t\t\t\t\t\t\tdescriptor = new Descriptor(characteristic, descriptor)\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!characteristic.descriptors.find(describedDescriptor => {\n\t\t\t\t\t\t\t\t\treturn describedDescriptor.uuid === descriptor.uuid\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcharacteristic.descriptors.push(descriptor)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst { autoListenToNotifiableCharacteristics } = require(\"./configuration.js\")\n\n\t\t\t\tfor (const service of this.services) {\n\t\t\t\t\tfor (const characteristic of service.characteristics) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcharacteristic.properties.notify &&\n\t\t\t\t\t\t\tautoListenToNotifiableCharacteristics\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tawait characteristic.startListeningForNotifications()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (const descriptor of characteristic.descriptors) {\n\t\t\t\t\t\t\tawait descriptor.onceReady()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tawait characteristic.onceReady()\n\t\t\t\t\t}\n\n\t\t\t\t\tawait service.onceReady()\n\t\t\t\t}\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceBluetoothInterfaceDiscoveryError(\n\t\t\t\t\t\t\"Could not discover the devices Bluetooth interface.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\t#onConnectionLost() {\n\t\tif (this.#willDisconnect) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.emit(\"connection-lost\")\n\t}\n\n\t#onDisconnected() {\n\t\tthis.emit(\"disconnected\")\n\t}\n}\n\nclass DeviceOperationError extends BluError {}\nclass DeviceConnectionError extends BluError {}\nclass DeviceBluetoothInterfaceDiscoveryError extends BluError {}\nclass DeviceBluetoothInterfaceIncompleteError extends BluError {}\nclass DescriptorDiscoveryError extends BluError {}\n\nmodule.exports = Device","const EventEmitter = require(\"../utils/eventEmitter.js\")\nconst BluError = require(\"../utils/bluError.js\")\n\nclass GATTOperationQueue extends EventEmitter {\n\t#operationTimeout = 5000\n\t#isGATTOperationInProgress = false\n\n\tget isBusy() {\n\t\treturn this.#isGATTOperationInProgress\n\t}\n\n\tawait(callback) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof callback !== \"function\") {\n\t\t\t\treject(\n\t\t\t\t\tnew GATTOperationQueueError(\n\t\t\t\t\t\t`Argument \"callback\" must be of type \"function\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait this.#onceReadyForGATTOperation()\n\n\t\t\tlet timeout = setTimeout(() => {\n\t\t\t\treject(\n\t\t\t\t\tnew GATTOperationError(\n\t\t\t\t\t\t`GATT operation timed out after ${this.#operationTimeout} ms.`\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}, this.#operationTimeout)\n\n\t\t\tthis.#isGATTOperationInProgress = true\n\n\t\t\tthis.emit(\"gatt-operation-started\")\n\n\t\t\tcallback()\n\t\t\t.then(value => {\n\t\t\t\tresolve(value)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\treject(error)\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tclearTimeout(timeout)\n\n\t\t\t\tthis.#isGATTOperationInProgress = false\n\n\t\t\t\tthis.emit(\"gatt-operation-finished\")\n\t\t\t})\n\t\t})\n\t}\n\n\t#onceReadyForGATTOperation() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (!this.#isGATTOperationInProgress) {\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(\"gatt-operation-finished\", resolve)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass GATTOperationQueueError extends BluError {}\nclass GATTOperationError extends BluError {}\n\nmodule.exports = GATTOperationQueue","const Logger = require(\"../utils/logger.js\")\n\nmodule.exports = new Logger()","const Response = require(\"./response.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\nconst isTypedArray = require(\"../utils/isTypedArray.js\")\n\nclass Request {\n\tresponseType = Response\n\tdata\n\n\tconstructor(...data) {\n\t\tif (data.length === 0) {\n\t\t\tthrow new RequestConstructionError(`Argument \"data\" is required.`)\n\t\t}\n\n\t\tif (isTypedArray(data[0]) && data[1] === undefined) {\n\t\t\tthis.data = data[0]\n\t\t}\n\t\telse {\n\t\t\tif (!data.every(entry => typeof entry === \"number\")) {\n\t\t\t\tthrow new RequestConstructionError(\n\t\t\t\t\t`Argument \"data\" must be an array of items ` +\n\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.data = new Uint8Array(data)\n\t\t}\n\t}\n}\n\nclass RequestConstructionError extends BluError {}\n\nmodule.exports = Request","const BluError = require(\"../utils/bluError.js\")\nconst isTypedArray = require(\"../utils/isTypedArray.js\")\n\nclass Response {\n\tdata\n\n\tconstructor(data) {\n\t\tif (data !== undefined && data !== null && !isTypedArray(data)) {\n\t\t\tthrow new ResponseConstructionError(\n\t\t\t\t`Argument \"data\" must be either \"undefined\", ` +\n\t\t\t\t`\"null\" or a concrete type of \"TypedArray\". ` +\n\t\t\t\t`Got \"${data?.constructor.name}\" instead.`\n\t\t\t)\n\t\t}\n\n\t\tthis.data = data ?? null\n\t}\n\n\tstatic validatorFunction(response) {\n\t\treturn true\n\t}\n}\n\nclass ResponseConstructionError extends BluError {}\n\nmodule.exports = Response","const bluetooth = require(\"./bluetooth.js\")\n\nconst BluError = require(\"../utils/bluError.js\")\n\nclass Scanner {\n\tgetDevice() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!bluetooth.isSupported) {\n\t\t\t\treject(\n\t\t\t\t\tnew BluError(\n\t\t\t\t\t\t\"Blu is not compatible with this browser.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst { scannerConfig, deviceType } = require(\"./configuration.js\")\n\n\t\t\t\tlet device = await globalThis.navigator.bluetooth.requestDevice(scannerConfig)\n\n\t\t\t\tdevice = device === undefined ? null : new deviceType(device)\n\n\t\t\t\tresolve(device)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\tif (error.name === \"NotFoundError\") {\n\t\t\t\t\t// Device chooser has been closed on the client side.\n\t\t\t\t\tresolve(null)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew ScannerError(\"An error occurred.\", error)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetPairedDevices() {\n\t\t// Experimental feature.\n\t\t// Compatibility: https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth/getDevices#browser_compatibility\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof globalThis.navigator?.bluetooth?.getDevices !== \"function\") {\n\t\t\t\treject(\n\t\t\t\t\tnew ScannerError(\n\t\t\t\t\t\t\"This feature is not supported by this browser.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet devices = await globalThis.navigator.bluetooth.getDevices()\n\n\t\t\t\tresolve(devices)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew ScannerError(\"An error occurred.\", error)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass ScannerError extends BluError {}\n\nmodule.exports = new Scanner()","const EventEmitter = require(\"../utils/eventEmitter.js\")\n\nclass Service extends EventEmitter {\n\tdevice\n\tdescription\n\tcharacteristics\n\n\t_bluetoothService\n\n\tconstructor(device, bluetoothService, description) {\n\t\tsuper()\n\n\t\tthis.device = device\n\t\tthis.description = description\n\t\tthis.characteristics = []\n\n\t\tthis._bluetoothService = bluetoothService\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothService.uuid\n\t}\n\n\tasync onceReady() {}\n}\n\nmodule.exports = Service","// Generated by genversion.\nmodule.exports = \"1.2.0\"\n","class BluError extends Error {\n\tconstructor(message, underlyingError) {\n\t\tsuper(message, { cause: underlyingError })\n\n\t\tif (Error.captureStackTrace) {\n\t\t\tError.captureStackTrace(this, this.constructor)\n\t\t}\n\n\t\tthis.name = this.constructor.name\n\n\t\tif (underlyingError) {\n\t\t\tthis.message += ` // ${underlyingError.name}: ${underlyingError.message}`\n\t\t}\n\t}\n}\n\nmodule.exports = BluError","const logger = require(\"../src/logger.js\")\n\nconst BluError = require(\"./bluError.js\")\n\nclass EventEmitter {\n\t#strictMode\n\t#listeners = new Map()\n\t#mutedChannels = new Set()\n\n\tconstructor(strictMode = false) {\n\t\tif (typeof strictMode !== \"boolean\") {\n\t\t\tthrow new EventEmitterError(`Argument \"strictMode\" must be of type \"boolean\".`)\n\t\t}\n\n\t\tthis.#strictMode = strictMode\n\t}\n\n\temit(channel, ...payload) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (this.#strictMode && !this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`\"${channel}\" is not a valid channel. ` +\n\t\t\t\t`Add it manually or disable strict mode.`\n\t\t\t)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\n\t\tif (this.#mutedChannels.has(channel)) {\n\t\t\tlogger.debug(`Suppressed event for the muted channel \"${channel}\".`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tfor (const callback of this.#listeners.get(channel)) {\n\t\t\tcallback(...payload)\n\t\t}\n\t}\n\n\ton(channel, callback) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow new EventEmitterError(`Argument \"callback\" must be of type \"function\".`)\n\t\t}\n\n\t\tif (this.#strictMode && !this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`\"${channel}\" is not a valid channel. ` +\n\t\t\t\t`Add it manually or disable strict mode.`\n\t\t\t)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\n\t\tthis.#listeners.set(channel, this.#listeners.get(channel).add(callback))\n\t}\n\n\tonce(channel, callback) {\n\t\tlet onceCallback = () => {\n\t\t\tthis.off(channel, onceCallback)\n\t\t\tcallback()\n\t\t}\n\n\t\tthis.on(channel, onceCallback)\n\t}\n\n\tmuteChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (this.#mutedChannels.has(channel)) {\n\t\t\tlogger.warn(`The channel \"${channel}\" is already muted.`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.#mutedChannels.add(channel)\n\t}\n\n\tunmuteChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (!this.#mutedChannels.has(channel)) {\n\t\t\tlogger.warn(`The channel \"${channel}\" is already unmuted.`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.#mutedChannels.delete(channel)\n\t}\n\n\toff(channel, callback) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow new EventEmitterError(`Argument \"callback\" must be of type \"function\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (!this.#listeners.get(channel).delete(callback)) {\n\t\t\tlogger.warn(\n\t\t\t\t`Cannot remove the function in argument \"callback\", ` +\n\t\t\t\t`as it is not yet registered for \"${channel}\".`,\n\t\t\t\tthis\n\t\t\t)\n\t\t}\n\t}\n\n\taddChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\t\telse {\n\t\t\tlogger.warn(`The channel \"${channel}\" already exists.`, this)\n\t\t}\n\t}\n\n\tremoveChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.delete(channel)\n\t\t}\n\t\telse {\n\t\t\tlogger.warn(`The channel \"${channel}\" does not exist.`, this)\n\t\t}\n\t}\n\n\tremoveAllListeners(channel) {\n\t\tif (channel !== undefined && typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`Argument \"channel\" must be either \"undefined\" or of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (channel) {\n\t\t\tif (this.#listeners.has(channel)) {\n\t\t\t\tthis.#listeners.set(channel, new Set())\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlogger.warn(`The channel \"${channel}\" does not exist.`, this)\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.#listeners.clear()\n\t\t}\n\t}\n}\n\nclass EventEmitterError extends BluError {}\n\nmodule.exports = EventEmitter","function isArray(subject) {\n\treturn Array.isArray(subject)\n}\n\nmodule.exports = isArray","function isSubclass(subject, classToTest) {\n\treturn subject.prototype instanceof classToTest || subject === classToTest\n}\n\nmodule.exports = isSubclass","function isTypedArray(subject) {\n\treturn ArrayBuffer.isView(subject)\n}\n\nmodule.exports = isTypedArray","const BluError = require(\"../utils/bluError.js\")\n\nclass Logger {\n\tincludeTimestamps = false\n\tincludeLevelNames = false\n\n\t#prefix = \"\"\n\t#level = 0\n\t#target = console\n\t#isEnabled = true\n\n\tget isEnabled() {\n\t\treturn this.#isEnabled\n\t}\n\n\tget target() {\n\t\treturn this.#target\n\t}\n\n\tenable() {\n\t\tif (this.#isEnabled) {\n\t\t\tthis.warn(\"Already enabled.\", this)\n\t\t}\n\n\t\tthis.#isEnabled = true\n\t}\n\n\tdisable() {\n\t\tif (!this.#isEnabled) {\n\t\t\tthis.warn(\"Already disabled.\", this)\n\t\t}\n\n\t\tthis.#isEnabled = false\n\t}\n\n\tsetPrefix(prefix) {\n\t\tif (typeof prefix !== \"string\") {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"prefix\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#prefix = prefix\n\t}\n\n\tsetPrefix(prefix) {\n\t\tif (typeof prefix !== \"string\") {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"prefix\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#prefix = prefix\n\t}\n\n\tsetLevel(level) {\n\t\tif (\n\t\t\ttypeof level !== \"string\" ||\n\t\t\t![\"debug\", \"log\", \"warn\", \"error\"].includes(level)\n\t\t) {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"level\" must be of type \"string\" and be one of the ` +\n\t\t\t\t`following: \"debug\", \"log\", \"warn\" or \"error\".`\n\t\t\t)\n\t\t}\n\n\t\tswitch (level) {\n\t\t\tcase \"debug\":\n\t\t\t\tthis.#level = 0\n\t\t\t\tbreak\n\t\t\tcase \"log\":\n\t\t\t\tthis.#level = 1\n\t\t\t\tbreak\n\t\t\tcase \"warn\":\n\t\t\t\tthis.#level = 2\n\t\t\t\tbreak\n\t\t\tcase \"error\":\n\t\t\t\tthis.#level = 3\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tsetTarget(consoleLike) {\n\t\tif (\n\t\t\ttypeof consoleLike !== \"object\" ||\n\t\t\ttypeof consoleLike.log !== \"function\" ||\n\t\t\ttypeof consoleLike.debug !== \"function\" ||\n\t\t\ttypeof consoleLike.warn !== \"function\" ||\n\t\t\ttypeof consoleLike.error !== \"function\"\n\t\t) {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"consoleLike\" must be an object that implements the ` +\n\t\t\t\t`following functions: \"log\", \"debug\", \"warn\" and \"error\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#target = consoleLike\n\t}\n\n\tdebug(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 0) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.debug(this.#getMessagePrefix(origin, \"debug\") + message)\n\t}\n\n\tlog(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 1) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.log(this.#getMessagePrefix(origin, \"log\") + message)\n\t}\n\n\twarn(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 2) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.warn(this.#getMessagePrefix(origin, \"warn\") + message)\n\t}\n\n\terror(message, origin) {\n\t\tif (!this.#isEnabled) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.error(this.#getMessagePrefix(origin, \"error\") + message)\n\t}\n\n\t#getMessagePrefix(origin, level) {\n\t\tlet prefix = \"\"\n\n\t\tif (!!this.includeTimestamps) {\n\t\t\tprefix += `[${DateFormatter.format(Date.now())}] `\n\t\t}\n\n\t\tif (!!this.includeLevelNames) {\n\t\t\tprefix += `[${level}] `\n\t\t}\n\n\t\tif (this.#prefix.length > 0) {\n\t\t\tprefix += `[${this.#prefix}] `\n\t\t}\n\n\t\tif (typeof origin === \"string\") {\n\t\t\tprefix += `${origin}: `\n\t\t}\n\t\telse if (origin?.constructor) {\n\t\t\tprefix += `${origin.constructor.name}: `\n\t\t}\n\t\telse if (origin?.name) {\n\t\t\tprefix += `${origin.name}: `\n\t\t}\n\n\t\treturn prefix\n\t}\n}\n\nconst DateFormatter = new Intl.DateTimeFormat(\"en-US\", {\n\thour12: false,\n\thour: \"numeric\",\n\tminute: \"numeric\",\n\tsecond: \"numeric\",\n\tfractionalSecondDigits: 3\n})\n\nclass LoggerError extends BluError {}\n\nmodule.exports = Logger","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import bluetooth from \"./src/bluetooth.js\"\nimport configuration from \"./src/configuration.js\"\nimport logger from \"./src/logger.js\"\nimport scanner from \"./src/scanner.js\"\nimport version from \"./src/version.js\"\n\nimport {\n\tServiceDescription,\n\tCharacteristicDescription,\n\tDescriptorDescription\n} from \"./src/descriptions.js\"\nimport Service from \"./src/service.js\"\nimport Characteristic from \"./src/characteristic.js\"\nimport Descriptor from \"./src/descriptor.js\"\nimport Request from \"./src/request.js\"\nimport Response from \"./src/response.js\"\nimport Device from \"./src/device.js\"\n\nimport BluError from \"./utils/bluError.js\"\n\nexport default {\n\tbluetooth: bluetooth,\n\tconfiguration: configuration,\n\tlogger: logger,\n\tscanner: scanner,\n\tversion: version,\n\n\tServiceDescription: ServiceDescription,\n\tCharacteristicDescription: CharacteristicDescription,\n\tDescriptorDescription: DescriptorDescription,\n\tService: Service,\n\tCharacteristic: Characteristic,\n\tDescriptor: Descriptor,\n\tDevice: Device,\n\tRequest: Request,\n\tResponse: Response,\n\n\tBluError: BluError\n}\n\nexport { default as bluetooth } from \"./src/bluetooth.js\"\nexport { default as configuration } from \"./src/configuration.js\"\nexport { default as logger } from \"./src/logger.js\"\nexport { default as scanner } from \"./src/scanner.js\"\nexport { default as version } from \"./src/version.js\"\n\nexport {\n\tServiceDescription,\n\tCharacteristicDescription,\n\tDescriptorDescription\n} from \"./src/descriptions.js\"\nexport { default as Service } from \"./src/service.js\"\nexport { default as Characteristic } from \"./src/characteristic.js\"\nexport { default as Descriptor } from \"./src/descriptor.js\"\nexport { default as Device } from \"./src/device.js\"\nexport { default as Request } from \"./src/request.js\"\nexport { default as Response } from \"./src/response.js\"\n\nexport { default as BluError } from \"./utils/bluError.js\""],"names":["EventEmitter","module","exports","Bluetooth","Set","constructor","super","this","addChannel","isSupported","globalThis","navigator","bluetooth","addEventListener","event","emit","value","on","clear","device","add","delete","isDataTransferLoggingEnabled","connectedDevices","Array","from","connectedDevice","length","isAvailable","Promise","resolve","getAvailability","then","available","enableDataTransferLogging","disableDataTransferLogging","logger","Request","Response","BluError","isArray","isTypedArray","REQUEST_TIMEOUT","CharacteristicProperties","read","write","writeWithoutResponse","notify","bluetoothCharacteristicProperties","isListening","string","toString","join","CharacteristicOperationError","characteristic","message","underlyingError","NotificationTimeoutError","Characteristic","service","description","properties","descriptors","responseType","_bluetoothCharacteristic","bluetoothCharacteristic","response","target","debug","name","uuid","hasExpectedProperties","undefined","expectedIndicators","async","readValue","reject","performGATTOperation","error","responseProperty","withoutResponse","every","entry","Uint8Array","writeValueWithoutResponse","writeValueWithResponse","request","timeout","onResponse","validatorFunction","clearTimeout","timeoutTimer","off","data","setTimeout","catch","requestAll","requests","responses","push","startListeningForNotifications","startNotifications","bind","stopListeningForNotifications","stopNotifications","removeEventListener","Device","isSubclass","BluConfigurationError","Configuration","restoreDefaults","scannerConfig","deviceType","ensureCompleteDeviceBluetoothInterface","autoListenToNotifiableCharacteristics","acceptAllDevices","use","useScannerConfig","useDeviceType","set","configuration","Service","Descriptor","CharacteristicDescription","identifier","type","descriptorDescriptions","CharacteristicDescriptionConstructionError","ServiceDescriptionConstructionError","descriptorDescription","DescriptorDescription","match","toLowerCase","DescriptorDescriptionConstructionError","ServiceDescription","characteristics","characteristicDescriptions","characteristicDescription","DescriptorOperationError","descriptor","_bluetoothDescriptor","bluetoothDescriptor","writeValue","GATTOperationQueue","DeviceOperationError","DeviceConnectionError","DeviceBluetoothInterfaceDiscoveryError","DeviceBluetoothInterfaceIncompleteError","DescriptorDiscoveryError","id","services","serviceDescriptions","_bluetoothDevice","bluetoothDevice","isConnected","gatt","connected","connect","once","onceReady","disconnect","callback","await","log","warn","watchAdvertisements","interfaceIncomplete","serviceDescription","getPrimaryService","_bluetoothService","getCharacteristic","getDescriptor","getPrimaryServices","find","describedService","getCharacteristics","describedCharacteristic","getDescriptors","describedDescriptor","GATTOperationQueueError","GATTOperationError","isBusy","finally","Logger","RequestConstructionError","ResponseConstructionError","static","ScannerError","Scanner","getDevice","requestDevice","getPairedDevices","getDevices","bluetoothService","Error","cause","captureStackTrace","EventEmitterError","Map","strictMode","channel","payload","has","get","onceCallback","muteChannel","unmuteChannel","removeChannel","removeAllListeners","subject","classToTest","prototype","ArrayBuffer","isView","DateFormatter","Intl","DateTimeFormat","hour12","hour","minute","second","fractionalSecondDigits","LoggerError","includeTimestamps","includeLevelNames","console","isEnabled","enable","disable","setPrefix","prefix","setLevel","level","includes","setTarget","consoleLike","origin","format","Date","now","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","obj","prop","hasOwnProperty","call","scanner","version"],"sourceRoot":""}