{"version":3,"file":"blu.min.cjs","mappings":"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","sources":["webpack://@blu.js/blu/webpack/bootstrap","webpack://@blu.js/blu/webpack/runtime/define property getters","webpack://@blu.js/blu/webpack/runtime/hasOwnProperty shorthand","webpack://@blu.js/blu/./utils/bluError.js","webpack://@blu.js/blu/./utils/logger.js","webpack://@blu.js/blu/./src/logger.js","webpack://@blu.js/blu/./utils/eventEmitter.js","webpack://@blu.js/blu/./src/bluetooth.js","webpack://@blu.js/blu/./src/service.js","webpack://@blu.js/blu/./utils/isTypedArray.js","webpack://@blu.js/blu/./src/response.js","webpack://@blu.js/blu/./src/request.js","webpack://@blu.js/blu/./utils/isArray.js","webpack://@blu.js/blu/./src/characteristic.js","webpack://@blu.js/blu/./src/descriptor.js","webpack://@blu.js/blu/./src/gattOperationQueue.js","webpack://@blu.js/blu/./utils/isSubclass.js","webpack://@blu.js/blu/./src/descriptions.js","webpack://@blu.js/blu/./src/device.js","webpack://@blu.js/blu/./src/configuration.js","webpack://@blu.js/blu/./src/scanner.js","webpack://@blu.js/blu/./index.js","webpack://@blu.js/blu/./src/version.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export default class BluError extends Error {\n\tconstructor(message, underlyingError) {\n\t\tsuper(message, { cause: underlyingError })\n\n\t\tif (Error.captureStackTrace) {\n\t\t\tError.captureStackTrace(this, this.constructor)\n\t\t}\n\n\t\tthis.name = this.constructor.name\n\n\t\tif (underlyingError) {\n\t\t\tthis.message += ` // ${underlyingError.name}: ${underlyingError.message}`\n\t\t}\n\t}\n}","import BluError from \"../utils/bluError.js\"\n\nexport default class Logger {\n\tincludeTimestamps = false\n\tincludeLevelNames = false\n\n\t#prefix = \"\"\n\t#level = 0\n\t#target = console\n\t#isEnabled = true\n\n\tget isEnabled() {\n\t\treturn this.#isEnabled\n\t}\n\n\tget target() {\n\t\treturn this.#target\n\t}\n\n\tenable() {\n\t\tif (this.#isEnabled) {\n\t\t\tthis.warn(\"Already enabled.\", this)\n\t\t}\n\n\t\tthis.#isEnabled = true\n\t}\n\n\tdisable() {\n\t\tif (!this.#isEnabled) {\n\t\t\tthis.warn(\"Already disabled.\", this)\n\t\t}\n\n\t\tthis.#isEnabled = false\n\t}\n\n\tsetPrefix(prefix) {\n\t\tif (typeof prefix !== \"string\") {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"prefix\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#prefix = prefix\n\t}\n\n\tsetPrefix(prefix) {\n\t\tif (typeof prefix !== \"string\") {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"prefix\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#prefix = prefix\n\t}\n\n\tsetLevel(level) {\n\t\tif (\n\t\t\ttypeof level !== \"string\" ||\n\t\t\t![\"debug\", \"log\", \"warn\", \"error\"].includes(level)\n\t\t) {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"level\" must be of type \"string\" and be one of the ` +\n\t\t\t\t`following: \"debug\", \"log\", \"warn\" or \"error\".`\n\t\t\t)\n\t\t}\n\n\t\tswitch (level) {\n\t\t\tcase \"debug\":\n\t\t\t\tthis.#level = 0\n\t\t\t\tbreak\n\t\t\tcase \"log\":\n\t\t\t\tthis.#level = 1\n\t\t\t\tbreak\n\t\t\tcase \"warn\":\n\t\t\t\tthis.#level = 2\n\t\t\t\tbreak\n\t\t\tcase \"error\":\n\t\t\t\tthis.#level = 3\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tsetTarget(consoleLike) {\n\t\tif (\n\t\t\ttypeof consoleLike !== \"object\" ||\n\t\t\ttypeof consoleLike.log !== \"function\" ||\n\t\t\ttypeof consoleLike.debug !== \"function\" ||\n\t\t\ttypeof consoleLike.warn !== \"function\" ||\n\t\t\ttypeof consoleLike.error !== \"function\"\n\t\t) {\n\t\t\tthrow new LoggerError(\n\t\t\t\t`Argument \"consoleLike\" must be an object that implements the ` +\n\t\t\t\t`following functions: \"log\", \"debug\", \"warn\" and \"error\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#target = consoleLike\n\t}\n\n\tdebug(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 0) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.debug(this.#getMessagePrefix(origin, \"debug\") + message)\n\t}\n\n\tlog(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 1) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.log(this.#getMessagePrefix(origin, \"log\") + message)\n\t}\n\n\twarn(message, origin) {\n\t\tif (!this.#isEnabled || this.#level > 2) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.warn(this.#getMessagePrefix(origin, \"warn\") + message)\n\t}\n\n\terror(message, origin) {\n\t\tif (!this.#isEnabled) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.#target.error(this.#getMessagePrefix(origin, \"error\") + message)\n\t}\n\n\t#getMessagePrefix(origin, level) {\n\t\tlet prefix = \"\"\n\n\t\tif (!!this.includeTimestamps) {\n\t\t\tprefix += `[${DateFormatter.format(Date.now())}] `\n\t\t}\n\n\t\tif (!!this.includeLevelNames) {\n\t\t\tprefix += `[${level}] `\n\t\t}\n\n\t\tif (this.#prefix.length > 0) {\n\t\t\tprefix += `[${this.#prefix}] `\n\t\t}\n\n\t\tif (typeof origin === \"string\") {\n\t\t\tprefix += `${origin}: `\n\t\t}\n\t\telse if (origin?.constructor) {\n\t\t\tprefix += `${origin.constructor.name}: `\n\t\t}\n\t\telse if (origin?.name) {\n\t\t\tprefix += `${origin.name}: `\n\t\t}\n\n\t\treturn prefix\n\t}\n}\n\nconst DateFormatter = new Intl.DateTimeFormat(\"en-US\", {\n\thour12: false,\n\thour: \"numeric\",\n\tminute: \"numeric\",\n\tsecond: \"numeric\",\n\tfractionalSecondDigits: 3\n})\n\nclass LoggerError extends BluError {}","import Logger from \"../utils/logger.js\"\n\nexport default new Logger()","import logger from \"../src/logger.js\"\n\nimport BluError from \"./bluError.js\"\n\nexport default class EventEmitter {\n\t#strictMode\n\t#listeners = new Map()\n\t#mutedChannels = new Set()\n\n\tconstructor(strictMode = false) {\n\t\tif (typeof strictMode !== \"boolean\") {\n\t\t\tthrow new EventEmitterError(`Argument \"strictMode\" must be of type \"boolean\".`)\n\t\t}\n\n\t\tthis.#strictMode = strictMode\n\t}\n\n\temit(channel, ...payload) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (this.#strictMode && !this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`\"${channel}\" is not a valid channel. ` +\n\t\t\t\t`Add it manually or disable strict mode.`\n\t\t\t)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\n\t\tif (this.#mutedChannels.has(channel)) {\n\t\t\tlogger.debug(`Suppressed event for the muted channel \"${channel}\".`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tfor (const callback of this.#listeners.get(channel)) {\n\t\t\tcallback(...payload)\n\t\t}\n\t}\n\n\ton(channel, callback) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow new EventEmitterError(`Argument \"callback\" must be of type \"function\".`)\n\t\t}\n\n\t\tif (this.#strictMode && !this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`\"${channel}\" is not a valid channel. ` +\n\t\t\t\t`Add it manually or disable strict mode.`\n\t\t\t)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\n\t\tthis.#listeners.set(channel, this.#listeners.get(channel).add(callback))\n\t}\n\n\tonce(channel, callback) {\n\t\tlet onceCallback = (...payload) => {\n\t\t\tthis.off(channel, onceCallback)\n\t\t\tcallback(...payload)\n\t\t}\n\n\t\tthis.on(channel, onceCallback)\n\t}\n\n\tmuteChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (this.#mutedChannels.has(channel)) {\n\t\t\tlogger.warn(`The channel \"${channel}\" is already muted.`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.#mutedChannels.add(channel)\n\t}\n\n\tunmuteChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (!this.#mutedChannels.has(channel)) {\n\t\t\tlogger.warn(`The channel \"${channel}\" is already unmuted.`, this)\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.#mutedChannels.delete(channel)\n\t}\n\n\toff(channel, callback) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow new EventEmitterError(`Argument \"callback\" must be of type \"function\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthrow new EventEmitterError(`\"${channel}\" is not a valid channel.`)\n\t\t}\n\n\t\tif (!this.#listeners.get(channel).delete(callback)) {\n\t\t\tlogger.warn(\n\t\t\t\t`Cannot remove the function in argument \"callback\", ` +\n\t\t\t\t`as it is not yet registered for \"${channel}\".`,\n\t\t\t\tthis\n\t\t\t)\n\t\t}\n\t}\n\n\taddChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (!this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.set(channel, new Set())\n\t\t}\n\t\telse {\n\t\t\tlogger.warn(`The channel \"${channel}\" already exists.`, this)\n\t\t}\n\t}\n\n\tremoveChannel(channel) {\n\t\tif (typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(`Argument \"channel\" must be of type \"string\".`)\n\t\t}\n\n\t\tif (this.#listeners.has(channel)) {\n\t\t\tthis.#listeners.delete(channel)\n\t\t}\n\t\telse {\n\t\t\tlogger.warn(`The channel \"${channel}\" does not exist.`, this)\n\t\t}\n\t}\n\n\tremoveAllListeners(channel) {\n\t\tif (channel !== undefined && typeof channel !== \"string\") {\n\t\t\tthrow new EventEmitterError(\n\t\t\t\t`Argument \"channel\" must be either \"undefined\" or of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (channel) {\n\t\t\tif (this.#listeners.has(channel)) {\n\t\t\t\tthis.#listeners.set(channel, new Set())\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlogger.warn(`The channel \"${channel}\" does not exist.`, this)\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.#listeners.clear()\n\t\t}\n\t}\n}\n\nclass EventEmitterError extends BluError {}","import EventEmitter from \"../utils/eventEmitter.js\"\n\nclass Bluetooth extends EventEmitter {\n\t#connectedDevices = new Set()\n\t#isDataTransferLoggingEnabled = false\n\n\tconstructor() {\n\t\tsuper(true)\n\n\t\tthis.addChannel(\"bluetooth-enabled\")\n\t\tthis.addChannel(\"bluetooth-disabled\")\n\n\t\tthis.addChannel(\"device-connected\")\n\t\tthis.addChannel(\"device-connection-lost\")\n\t\tthis.addChannel(\"device-disconnected\")\n\n\t\tif (this.isSupported) {\n\t\t\tglobalThis.navigator.bluetooth.addEventListener(\"availabilitychanged\", event => {\n\t\t\t\tthis.emit(\n\t\t\t\t\tevent.value ?\n\t\t\t\t\t\"bluetooth-enabled\" :\n\t\t\t\t\t\"bluetooth-disabled\"\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tthis.on(\"bluetooth-disabled\", () => {\n\t\t\t\tthis.#connectedDevices.clear()\n\t\t\t})\n\n\t\t\tthis.on(\"device-connected\", device => {\n\t\t\t\tthis.#connectedDevices.add(device)\n\t\t\t})\n\n\t\t\tthis.on(\"device-disconnected\", device => {\n\t\t\t\tthis.#connectedDevices.delete(device)\n\t\t\t})\n\t\t}\n\t}\n\n\tget isSupported() {\n\t\treturn !!globalThis.navigator?.bluetooth\n\t}\n\n\tget isDataTransferLoggingEnabled() {\n\t\treturn this.#isDataTransferLoggingEnabled\n\t}\n\n\tget connectedDevices() {\n\t\treturn Array.from(this.#connectedDevices)\n\t}\n\n\tget connectedDevice() {\n\t\treturn this.connectedDevices[this.connectedDevices.length - 1] ?? null\n\t}\n\n\tisAvailable() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (this.isSupported) {\n\t\t\t\tglobalThis.navigator.bluetooth.getAvailability()\n\t\t\t\t.then(available => {\n\t\t\t\t\tresolve(available)\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(false)\n\t\t\t}\n\t\t})\n\t}\n\n\tenableDataTransferLogging() {\n\t\tthis.#isDataTransferLoggingEnabled = true\n\t}\n\n\tdisableDataTransferLogging() {\n\t\tthis.#isDataTransferLoggingEnabled = false\n\t}\n}\n\nexport default new Bluetooth()","import EventEmitter from \"../utils/eventEmitter.js\"\n\nexport default class Service extends EventEmitter {\n\tdevice\n\tdescription\n\tcharacteristics\n\n\t_bluetoothService\n\n\tconstructor(device, bluetoothService, description) {\n\t\tsuper()\n\n\t\tthis.device = device\n\t\tthis.description = description\n\t\tthis.characteristics = []\n\n\t\tthis._bluetoothService = bluetoothService\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothService.uuid\n\t}\n\n\tasync onceReady() {}\n}","export default function isTypedArray(subject) {\n\treturn ArrayBuffer.isView(subject)\n}","import BluError from \"../utils/bluError.js\"\nimport isTypedArray from \"../utils/isTypedArray.js\"\n\nexport default class Response {\n\tdata\n\n\tconstructor(data) {\n\t\tif (data !== undefined && data !== null && !isTypedArray(data)) {\n\t\t\tthrow new ResponseConstructionError(\n\t\t\t\t`Argument \"data\" must be either \"undefined\", ` +\n\t\t\t\t`\"null\" or a concrete type of \"TypedArray\". ` +\n\t\t\t\t`Got \"${data?.constructor.name}\" instead.`\n\t\t\t)\n\t\t}\n\n\t\tthis.data = data ?? null\n\t}\n\n\tstatic validatorFunction(response) {\n\t\treturn true\n\t}\n}\n\nclass ResponseConstructionError extends BluError {}","import Response from \"./response.js\"\n\nimport BluError from \"../utils/bluError.js\"\nimport isTypedArray from \"../utils/isTypedArray.js\"\n\nexport default class Request {\n\tresponseType = Response\n\tdata\n\n\tconstructor(...data) {\n\t\tif (data.length === 0) {\n\t\t\tthrow new RequestConstructionError(`Argument \"data\" is required.`)\n\t\t}\n\n\t\tif (isTypedArray(data[0]) && data[1] === undefined) {\n\t\t\tthis.data = data[0]\n\t\t}\n\t\telse {\n\t\t\tif (!data.every(entry => typeof entry === \"number\")) {\n\t\t\t\tthrow new RequestConstructionError(\n\t\t\t\t\t`Argument \"data\" must be an array of items ` +\n\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.data = new Uint8Array(data)\n\t\t}\n\t}\n}\n\nclass RequestConstructionError extends BluError {}","export default function isArray(subject) {\n\treturn Array.isArray(subject)\n}","import logger from \"./logger.js\"\nimport bluetooth from \"./bluetooth.js\"\n\nimport Request from \"./request.js\"\nimport Response from \"./response.js\"\n\nimport BluError from \"../utils/bluError.js\"\nimport EventEmitter from \"../utils/eventEmitter.js\"\nimport isArray from \"../utils/isArray.js\"\nimport isTypedArray from \"../utils/isTypedArray.js\"\n\nexport default class Characteristic extends EventEmitter {\n\tservice\n\tdescription\n\tproperties\n\tdescriptors\n\tresponseType = Response\n\n\t_bluetoothCharacteristic\n\n\tconstructor(service, bluetoothCharacteristic, description) {\n\t\tsuper()\n\n\t\tthis.service = service\n\t\tthis.description = description\n\t\tthis.properties = new CharacteristicProperties(\n\t\t\tbluetoothCharacteristic.properties\n\t\t)\n\t\tthis.descriptors = []\n\n\t\tthis._bluetoothCharacteristic = bluetoothCharacteristic\n\n\t\tthis.on(\"notification\", response => {\n\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\tlogger.target.debug(\n\t\t\t\t\t`${this.description.name}: Notification received:`,\n\t\t\t\t\tresponse\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothCharacteristic.uuid\n\t}\n\n\tget value() {\n\t\treturn this._bluetoothCharacteristic.value\n\t}\n\n\tget hasExpectedProperties() {\n\t\treturn this.properties.string === this.description.expectedIndicators\n\t}\n\n\tasync onceReady() {}\n\n\treadValue() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.read) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot read from a non-readable characteristic.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.readValue()\n\t\t\t\t})\n\n\t\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Read value:`,\n\t\t\t\t\t\tthis.value\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tresolve(this.value)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot read value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tread(responseProperty) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof responseProperty !== \"string\") {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"responseProperty\" must be of type \"string\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet value = await this.readValue()\n\n\t\t\t\tresolve(new this.responseType(value)[responseProperty])\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\twrite(value, withoutResponse = false) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (withoutResponse && !this.properties.writeWithoutResponse) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot write without response to a characteristic ` +\n\t\t\t\t\t\t`that is not writable without response.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!withoutResponse && !this.properties.write) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Cannot write to a non-writable characteristic.`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!isTypedArray(value)) {\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tif (!value.every(entry => typeof entry === \"number\")) {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be an array of items ` +\n\t\t\t\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array(value)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (typeof value !== \"number\") {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array([value])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Write:`,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tif (withoutResponse) {\n\t\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\t\treturn this._bluetoothCharacteristic.writeValueWithoutResponse(value)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\t\treturn this._bluetoothCharacteristic.writeValueWithResponse(value)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot write value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\trequest(request, timeout = REQUEST_TIMEOUT) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!(request instanceof Request)) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"request\" must be a valid instance of \"Request\". ` +\n\t\t\t\t\t\t`Got \"${request?.constructor.name}\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttimeout !== undefined &&\n\t\t\t\ttimeout !== null &&\n\t\t\t\ttypeof timeout !== \"number\"\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"timeout\" must be either \"undefined\", \"null\" or ` +\n\t\t\t\t\t\t`of type \"number\". `\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\tlogger.target.debug(\n\t\t\t\t\t`${this.description.name}: Request:`,\n\t\t\t\t\trequest\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tlet onResponse = response => {\n\t\t\t\tif (request.responseType.validatorFunction(response)) {\n\t\t\t\t\tclearTimeout(timeoutTimer)\n\n\t\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\t\tresolve(new request.responseType(response.data))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.on(\"notification\", onResponse)\n\n\t\t\tif (timeout) {\n\t\t\t\tvar timeoutTimer = setTimeout(() => {\n\t\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew NotificationTimeoutError(\n\t\t\t\t\t\t\t`Did not receive an expected notification ` +\n\t\t\t\t\t\t\t`from the device within ${timeout} ms.`\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t}, timeout)\n\t\t\t}\n\n\t\t\tthis.write(request.data)\n\t\t\t.catch(error => {\n\t\t\t\tclearTimeout(timeoutTimer)\n\n\t\t\t\tthis.off(\"notification\", onResponse)\n\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot request from characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t})\n\t\t})\n\t}\n\n\trequestAll(requests, timeout = REQUEST_TIMEOUT) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (\n\t\t\t\t!isArray(requests) ||\n\t\t\t\t!requests.every(request => request instanceof Request)\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"requests\" must be an array of instances of \"Request\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttimeout !== undefined &&\n\t\t\t\ttimeout !== null &&\n\t\t\t\ttypeof timeout !== \"number\"\n\t\t\t) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"timeout\" must be either \"undefined\", \"null\" or ` +\n\t\t\t\t\t\t`of type \"number\". `\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet responses = []\n\n\t\t\t\tfor (const request of requests) {\n\t\t\t\t\tresponses.push(await this.request(request, timeout))\n\t\t\t\t}\n\n\t\t\t\tresolve(responses)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\tstartListeningForNotifications() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.notify) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot start listening to a non-notifying characteristic.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.startNotifications()\n\t\t\t\t})\n\n\t\t\t\tthis._bluetoothCharacteristic.addEventListener(\n\t\t\t\t\t\"characteristicvaluechanged\",\n\t\t\t\t\tthis.#onNotification.bind(this)\n\t\t\t\t)\n\n\t\t\t\tthis.properties.isListening = true\n\n\t\t\t\tlogger.debug(\"Started listening for notifications.\", this)\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot start listening to characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tstopListeningForNotifications() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!this.properties.isListening) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot stop listening to a characteristic that is not yet listened to.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothCharacteristic.stopNotifications()\n\t\t\t\t})\n\n\t\t\t\tthis._bluetoothCharacteristic.removeEventListener(\n\t\t\t\t\t\"characteristicvaluechanged\",\n\t\t\t\t\tthis.#onNotification.bind(this)\n\t\t\t\t)\n\n\t\t\t\tthis.properties.isListening = false\n\n\t\t\t\tlogger.debug(\"Stopped listening for notifications.\", this)\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew CharacteristicOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot stop listening to characteristic.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\t#onNotification() {\n\t\tthis.emit(\"notification\", new this.responseType(this.value))\n\t}\n}\n\nconst REQUEST_TIMEOUT = 5000\n\nclass CharacteristicProperties {\n\tread\n\twrite\n\twriteWithoutResponse\n\tnotify\n\n\tconstructor(bluetoothCharacteristicProperties) {\n\t\tthis.read = bluetoothCharacteristicProperties.read\n\t\tthis.write = bluetoothCharacteristicProperties.write\n\t\tthis.writeWithoutResponse = bluetoothCharacteristicProperties.writeWithoutResponse\n\t\tthis.notify = bluetoothCharacteristicProperties.notify\n\n\t\tif (this.notify) {\n\t\t\tthis.isListening = false\n\t\t}\n\t}\n\n\tget string() {\n\t\treturn this.toString()\n\t}\n\n\ttoString() {\n\t\tlet indicators = [\n\t\t\tthis.read ? \"R\" : \"-\",\n\t\t\tthis.write ? \"W\" : \"-\",\n\t\t\tthis.writeWithoutResponse ? \"w\" : \"-\",\n\t\t\tthis.notify ? \"N\" : \"-\"\n\t\t]\n\n\t\treturn indicators.join(\"\")\n\t}\n}\n\nclass CharacteristicOperationError extends BluError {\n\tcharacteristic\n\n\tconstructor(characteristic, message, underlyingError) {\n\t\tsuper(message, underlyingError)\n\n\t\tthis.characteristic = characteristic\n\t}\n}\n\nclass NotificationTimeoutError extends BluError {}","import logger from \"./logger.js\"\nimport bluetooth from \"./bluetooth.js\"\n\nimport Response from \"./response.js\"\n\nimport BluError from \"../utils/bluError.js\"\nimport isArray from \"../utils/isArray.js\"\nimport isTypedArray from \"../utils/isTypedArray.js\"\n\nexport default class Descriptor {\n\tcharacteristic\n\tdescription\n\tresponseType = Response\n\n\t_bluetoothDescriptor\n\n\tconstructor(characteristic, bluetoothDescriptor, description) {\n\t\tthis.characteristic = characteristic\n\t\tthis.description = description\n\n\t\tthis._bluetoothDescriptor = bluetoothDescriptor\n\t}\n\n\tget uuid() {\n\t\treturn this._bluetoothDescriptor.uuid\n\t}\n\n\tget value() {\n\t\treturn this._bluetoothDescriptor.value\n\t}\n\n\tasync onceReady() {}\n\n\treadValue() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tawait this.characteristic.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothDescriptor.readValue()\n\t\t\t\t})\n\n\t\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Read value:`,\n\t\t\t\t\t\tthis.value\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tresolve(this.value)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot read value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\tread(responseProperty) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof responseProperty !== \"string\") {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t`Argument \"responseProperty\" must be of type \"string\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet value = await this.readValue()\n\n\t\t\t\tresolve(new this.responseType(value)[responseProperty])\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\twrite(value) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!isTypedArray(value)) {\n\t\t\t\tif (isArray(value)) {\n\t\t\t\t\tif (!value.every(entry => typeof entry === \"number\")) {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be an array of items ` +\n\t\t\t\t\t\t\t\t`that are all of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array(value)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (typeof value !== \"number\") {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t`Argument \"value\" must be of type \"number\".`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = new Uint8Array([value])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (bluetooth.isDataTransferLoggingEnabled) {\n\t\t\t\t\tlogger.target.debug(\n\t\t\t\t\t\t`${this.description.name}: Write:`,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tawait this.characteristic.service.device.performGATTOperation(() => {\n\t\t\t\t\treturn this._bluetoothDescriptor.writeValue(value)\n\t\t\t\t})\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DescriptorOperationError(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\"Cannot write value.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass DescriptorOperationError extends BluError {\n\tdescriptor\n\n\tconstructor(descriptor, message, underlyingError) {\n\t\tsuper(message, underlyingError)\n\n\t\tthis.descriptor = descriptor\n\t}\n}","import EventEmitter from \"../utils/eventEmitter.js\"\nimport BluError from \"../utils/bluError.js\"\n\nexport default class GATTOperationQueue extends EventEmitter {\n\t#operationTimeout = 5000\n\t#isGATTOperationInProgress = false\n\n\tget isBusy() {\n\t\treturn this.#isGATTOperationInProgress\n\t}\n\n\tawait(callback) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof callback !== \"function\") {\n\t\t\t\treject(\n\t\t\t\t\tnew GATTOperationQueueError(\n\t\t\t\t\t\t`Argument \"callback\" must be of type \"function\".`\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait this.#onceReadyForGATTOperation()\n\n\t\t\tlet timeout = setTimeout(() => {\n\t\t\t\treject(\n\t\t\t\t\tnew GATTOperationError(\n\t\t\t\t\t\t`GATT operation timed out after ${this.#operationTimeout} ms.`\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}, this.#operationTimeout)\n\n\t\t\tthis.#isGATTOperationInProgress = true\n\n\t\t\tthis.emit(\"gatt-operation-started\")\n\n\t\t\tcallback()\n\t\t\t.then(value => {\n\t\t\t\tresolve(value)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\treject(error)\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tclearTimeout(timeout)\n\n\t\t\t\tthis.#isGATTOperationInProgress = false\n\n\t\t\t\tthis.emit(\"gatt-operation-finished\")\n\t\t\t})\n\t\t})\n\t}\n\n\t#onceReadyForGATTOperation() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (!this.#isGATTOperationInProgress) {\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(\"gatt-operation-finished\", resolve)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass GATTOperationQueueError extends BluError {}\nclass GATTOperationError extends BluError {}","export default function isSubclass(subject, classToTest) {\n\treturn subject.prototype instanceof classToTest || subject === classToTest\n}","import Service from \"./service.js\"\nimport Characteristic from \"./characteristic.js\"\nimport Descriptor from \"./descriptor.js\"\n\nimport isArray from \"../utils/isArray.js\"\nimport isSubclass from \"../utils/isSubclass.js\"\nimport BluError from \"../utils/bluError.js\"\n\nclass Description {\n\tuuid\n\tidentifier\n\tname\n\n\tconstructor(\n\t\tuuid,\n\t\tidentifier = null,\n\t\tname = \"Unspecified Entity\"\n\t) {\n\t\tif (typeof uuid !== \"string\" && typeof uuid !== \"number\") {\n\t\t\tthrow new DescriptionConstructionError(\n\t\t\t\t`Argument \"uuid\" must be either of type \"string\" or \"number\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof uuid === \"string\") {\n\t\t\tuuid = uuid.toLowerCase()\n\t\t}\n\n\t\tif (identifier !== null && typeof identifier !== \"string\") {\n\t\t\tthrow new DescriptionConstructionError(\n\t\t\t\t`Argument \"identifier\" must be either \"null\" or of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new DescriptionConstructionError(\n\t\t\t\t`Argument \"name\" must be of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.uuid = uuid\n\t\tthis.identifier = identifier\n\t\tthis.name = name\n\t}\n}\n\nexport class ServiceDescription extends Description {\n\ttype\n\tcharacteristics\n\n\tconstructor(\n\t\tuuid,\n\t\tidentifier,\n\t\tname = \"Unspecified Service\",\n\t\ttype = Service,\n\t\tcharacteristicDescriptions = []\n\t) {\n\t\tsuper(uuid, identifier, name)\n\n\t\tif (!isSubclass(type, Service)) {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Service\".`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\t!isArray(characteristicDescriptions) ||\n\t\t\t!characteristicDescriptions.every(characteristicDescription =>\n\t\t\t\tcharacteristicDescription instanceof CharacteristicDescription\n\t\t\t)\n\t\t) {\n\t\t\tthrow new ServiceDescriptionConstructionError(\n\t\t\t\t`Argument \"characteristicDescriptions\" must be an array ` +\n\t\t\t\t`of \"CharacteristicDescription\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.type = type\n\t\tthis.characteristics = characteristicDescriptions\n\t}\n}\n\nexport class CharacteristicDescription extends Description {\n\ttype\n\tdescriptors\n\texpectedIndicators\n\n\tconstructor(\n\t\tuuid,\n\t\tidentifier,\n\t\tname = \"Unspecified Characteristic\",\n\t\ttype = Characteristic,\n\t\tdescriptorDescriptions = [],\n\t\texpectedIndicators = null\n\t) {\n\t\tsuper(uuid, identifier, name)\n\n\t\tif (!isSubclass(type, Characteristic)) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Characteristic\".`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\t!isArray(descriptorDescriptions) ||\n\t\t\t!descriptorDescriptions.every(descriptorDescription =>\n\t\t\t\tdescriptorDescription instanceof DescriptorDescription\n\t\t\t)\n\t\t) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"descriptorDescriptions\" must be an array ` +\n\t\t\t\t`of \"DescriptorDescription\".`\n\t\t\t)\n\t\t}\n\n\t\tif (expectedIndicators !== null && typeof expectedIndicators !== \"string\") {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"expectedIndicators\" must be either \"null\" ` +\n\t\t\t\t`or of type \"string\".`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\ttypeof expectedIndicators === \"string\" &&\n\t\t\t!expectedIndicators.match(/^[R-][W-][w-][N-]$/)\n\t\t) {\n\t\t\tthrow new CharacteristicDescriptionConstructionError(\n\t\t\t\t`Argument \"expectedIndicators\" contains a string ` +\n\t\t\t\t`that is incorrectly formatted.`\n\t\t\t)\n\t\t}\n\n\t\tthis.type = type\n\t\tthis.descriptors = descriptorDescriptions\n\t\tthis.expectedIndicators = expectedIndicators ?? null\n\t}\n}\n\nexport class DescriptorDescription extends Description {\n\ttype\n\n\tconstructor(\n\t\tuuid,\n\t\tidentifier = null,\n\t\tname = \"Unspecified Descriptor\",\n\t\ttype = Descriptor\n\t) {\n\t\tsuper(uuid, identifier, name)\n\n\t\tif (!isSubclass(type, Descriptor)) {\n\t\t\tthrow new DescriptorDescriptionConstructionError(\n\t\t\t\t`Argument \"type\" must be a class that is or extends \"Descriptor\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.type = type\n\t}\n}\n\nclass DescriptionConstructionError extends BluError {}\nclass ServiceDescriptionConstructionError extends BluError {}\nclass CharacteristicDescriptionConstructionError extends BluError {}\nclass DescriptorDescriptionConstructionError extends BluError {}","import logger from \"./logger.js\"\nimport configuration from \"./configuration.js\"\nimport bluetooth from \"./bluetooth.js\"\n\nimport Service from \"./service.js\"\nimport Characteristic from \"./characteristic.js\"\nimport Descriptor from \"./descriptor.js\"\nimport GATTOperationQueue from \"./gattOperationQueue.js\"\nimport {\n\tServiceDescription,\n\tCharacteristicDescription,\n\tDescriptorDescription\n} from \"./descriptions.js\"\n\nimport BluError from \"../utils/bluError.js\"\nimport EventEmitter from \"../utils/eventEmitter.js\"\n\nexport default class Device extends EventEmitter {\n\tid\n\tname\n\tproperties\n\tservices = []\n\tserviceDescriptions = []\n\n\t_bluetoothDevice\n\n\t#gattOperationQueue = new GATTOperationQueue()\n\t#willDisconnect = false\n\n\tconstructor(bluetoothDevice) {\n\t\tsuper(true)\n\n\t\tthis.id = bluetoothDevice.id\n\t\tthis.name = bluetoothDevice.name\n\n\t\tthis._bluetoothDevice = bluetoothDevice\n\n\t\tthis.addChannel(\"advertised\")\n\t\tthis.addChannel(\"connected\")\n\t\tthis.addChannel(\"connection-lost\")\n\t\tthis.addChannel(\"disconnected\")\n\n\t\tthis.#initialize()\n\t}\n\n\tget characteristics() {\n\t\tlet characteristics = []\n\n\t\tfor (const service of this.services) {\n\t\t\tcharacteristics.push(...service.characteristics)\n\t\t}\n\n\t\treturn characteristics\n\t}\n\n\tget isConnected() {\n\t\treturn this._bluetoothDevice.gatt.connected\n\t}\n\n\tasync onceReady() {}\n\n\tconnect() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tawait this._bluetoothDevice.gatt.connect()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceConnectionError(\n\t\t\t\t\t\t\"Could not connect to device.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.#discoverBluetoothInterface()\n\n\t\t\t\tthis._bluetoothDevice.addEventListener(\n\t\t\t\t\t\"gattserverdisconnected\",\n\t\t\t\t\tthis.#onDisconnected.bind(this),\n\t\t\t\t\t{ once: true }\n\t\t\t\t)\n\n\t\t\t\tthis._bluetoothDevice.addEventListener(\n\t\t\t\t\t\"gattserverdisconnected\",\n\t\t\t\t\tthis.#onConnectionLost.bind(this),\n\t\t\t\t\t{ once: true }\n\t\t\t\t)\n\n\t\t\t\tawait this.onceReady()\n\n\t\t\t\tthis.emit(\"connected\")\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t})\n\t}\n\n\tdisconnect() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tthis.#willDisconnect = true\n\n\t\t\ttry {\n\t\t\t\tawait this._bluetoothDevice.gatt.disconnect()\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceConnectionError(\n\t\t\t\t\t\t\"Could not disconnect from device.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.#willDisconnect = false\n\t\t})\n\t}\n\n\tperformGATTOperation(callback) {\n\t\treturn this.#gattOperationQueue.await(callback)\n\t}\n\n\tasync #initialize() {\n\t\tthis.on(\"connected\", () => {\n\t\t\tlogger.log(\"Connected.\", this)\n\t\t\tbluetooth.emit(\"device-connected\", this)\n\t\t})\n\n\t\tthis.on(\"connection-lost\", () => {\n\t\t\tlogger.warn(\"Connection lost.\", this)\n\t\t\tbluetooth.emit(\"device-connection-lost\", this)\n\t\t})\n\n\t\tthis.on(\"disconnected\", () => {\n\t\t\tlogger.log(\"Disconnected.\", this)\n\t\t\tbluetooth.emit(\"device-disconnected\", this)\n\t\t})\n\n\t\tif (typeof this._bluetoothDevice.watchAdvertisements === \"function\") {\n\t\t\t// Experimental feature.\n\t\t\t// Compatibility: https://developer.mozilla.org/en-US/docs/Web/API/BluetoothDevice#browser_compatibility\n\n\t\t\ttry {\n\t\t\t\tthis._bluetoothDevice.addEventListener(\"advertisementreceived\", event => {\n\t\t\t\t\t// TODO: Create custom event.\n\t\t\t\t\tthis.emit(\"advertised\", event)\n\t\t\t\t})\n\n\t\t\t\tawait this._bluetoothDevice.watchAdvertisements()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\tlogger.warn(\n\t\t\t\t\tnew DeviceOperationError(\n\t\t\t\t\t\t\"Could not start watching for advertisements.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\tasync #discoverBluetoothInterface() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tlet interfaceIncomplete = false\n\n\t\t\t\tfor (const serviceDescription of this.serviceDescriptions) {\n\t\t\t\t\tlet service\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tservice = new serviceDescription.type(\n\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\tawait this._bluetoothDevice.gatt.getPrimaryService(\n\t\t\t\t\t\t\t\tserviceDescription.uuid\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tserviceDescription\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tif (service.description.identifier) {\n\t\t\t\t\t\t\tthis[service.description.identifier] = service\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.services.push(service)\n\t\t\t\t\t}\n\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t`Could not discover \"${serviceDescription.name}\" ` +\n\t\t\t\t\t\t\t`(${serviceDescription.uuid}).`,\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\tif (service) {\n\t\t\t\t\t\tfor (const characteristicDescription of serviceDescription.characteristics) {\n\t\t\t\t\t\t\tlet characteristic\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcharacteristic = new characteristicDescription.type(\n\t\t\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\t\t\tawait service._bluetoothService.getCharacteristic(\n\t\t\t\t\t\t\t\t\t\tcharacteristicDescription.uuid\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcharacteristicDescription\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\tif (characteristic.description.identifier) {\n\t\t\t\t\t\t\t\t\tservice[characteristic.description.identifier] = characteristic\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tservice.characteristics.push(characteristic)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t\t\t`Could not discover \"${characteristicDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t`(${characteristicDescription.uuid}) ` +\n\t\t\t\t\t\t\t\t\t`in \"${serviceDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t`(${serviceDescription.uuid}).`,\n\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (characteristic) {\n\t\t\t\t\t\t\t\tfor (const descriptorDescription of characteristicDescription.descriptors) {\n\t\t\t\t\t\t\t\t\tlet descriptor\n\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tdescriptor = new descriptorDescription.type(\n\t\t\t\t\t\t\t\t\t\t\tcharacteristic,\n\t\t\t\t\t\t\t\t\t\t\tawait characteristic._bluetoothCharacteristic.getDescriptor(\n\t\t\t\t\t\t\t\t\t\t\t\tdescriptorDescription.uuid\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tdescriptorDescription\n\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\tif (descriptor.description.identifier) {\n\t\t\t\t\t\t\t\t\t\t\tcharacteristic[descriptor.description.identifier] = descriptor\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcharacteristic.descriptors.push(descriptor)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\t\t\t\tinterfaceIncomplete = true\n\n\t\t\t\t\t\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t\t\t\t\t\t`Could not discover \"${descriptorDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t\t\t`(${descriptorDescription.uuid}) ` +\n\t\t\t\t\t\t\t\t\t\t\t`in \"${characteristicDescription.name}\" ` +\n\t\t\t\t\t\t\t\t\t\t\t`(${characteristicDescription.uuid}).`,\n\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (configuration.ensureCompleteDeviceBluetoothInterface && interfaceIncomplete) {\n\t\t\t\t\tthrow new DeviceBluetoothInterfaceIncompleteError(\n\t\t\t\t\t\t`The devices Bluetooth interface is incomplete. ` +\n\t\t\t\t\t\t`Make sure that your service descriptions are correct or configure ` +\n\t\t\t\t\t\t`Blu to ignore incomplete device Bluetooth interfaces by setting the ` +\n\t\t\t\t\t\t`configuration property \"ensureCompleteDeviceBluetoothInterface\" ` +\n\t\t\t\t\t\t`to \"false\" before calling \"device.connect()\".`\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tlet services = await this._bluetoothDevice.gatt.getPrimaryServices()\n\n\t\t\t\tfor (let service of services) {\n\t\t\t\t\tservice = new Service(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\tservice,\n\t\t\t\t\t\tnew ServiceDescription(service.uuid)\n\t\t\t\t\t)\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!this.services.find(describedService => {\n\t\t\t\t\t\t\treturn describedService.uuid === service.uuid\n\t\t\t\t\t\t})\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.services.push(service)\n\t\t\t\t\t}\n\n\t\t\t\t\tlet characteristics = await service._bluetoothService.getCharacteristics()\n\n\t\t\t\t\tfor (let characteristic of characteristics) {\n\t\t\t\t\t\tcharacteristic = new Characteristic(\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tcharacteristic,\n\t\t\t\t\t\t\tnew CharacteristicDescription(characteristic.uuid)\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!service.characteristics.find(describedCharacteristic => {\n\t\t\t\t\t\t\t\treturn describedCharacteristic.uuid === characteristic.uuid\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tservice.characteristics.push(characteristic)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar descriptors = await characteristic._bluetoothCharacteristic.getDescriptors()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(error) {\n\t\t\t\t\t\t\tif (error.name === \"NotFoundError\") {\n\t\t\t\t\t\t\t\tdescriptors = []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrow new DescriptorDiscoveryError(\n\t\t\t\t\t\t\t\t\t`Could not discover descriptors of characteristic with UUID ` +\n\t\t\t\t\t\t\t\t\t`\"${characteristic.uuid}\".`,\n\t\t\t\t\t\t\t\t\terror\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let descriptor of descriptors) {\n\t\t\t\t\t\t\tdescriptor = new Descriptor(\n\t\t\t\t\t\t\t\tcharacteristic,\n\t\t\t\t\t\t\t\tdescriptor,\n\t\t\t\t\t\t\t\tnew DescriptorDescription(descriptor.uuid)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!characteristic.descriptors.find(describedDescriptor => {\n\t\t\t\t\t\t\t\t\treturn describedDescriptor.uuid === descriptor.uuid\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcharacteristic.descriptors.push(descriptor)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const service of this.services) {\n\t\t\t\t\tfor (const characteristic of service.characteristics) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcharacteristic.properties.notify &&\n\t\t\t\t\t\t\tconfiguration.autoListenToNotifiableCharacteristics\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tawait characteristic.startListeningForNotifications()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (const descriptor of characteristic.descriptors) {\n\t\t\t\t\t\t\tawait descriptor.onceReady()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tawait characteristic.onceReady()\n\t\t\t\t\t}\n\n\t\t\t\t\tawait service.onceReady()\n\t\t\t\t}\n\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew DeviceBluetoothInterfaceDiscoveryError(\n\t\t\t\t\t\t\"Could not discover the devices Bluetooth interface.\",\n\t\t\t\t\t\terror\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n\n\t#onConnectionLost() {\n\t\tif (this.#willDisconnect) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.emit(\"connection-lost\")\n\t}\n\n\t#onDisconnected() {\n\t\tthis.emit(\"disconnected\")\n\t}\n}\n\nclass DeviceOperationError extends BluError {}\nclass DeviceConnectionError extends BluError {}\nclass DeviceBluetoothInterfaceDiscoveryError extends BluError {}\nclass DeviceBluetoothInterfaceIncompleteError extends BluError {}\nclass DescriptorDiscoveryError extends BluError {}","import Device from \"./device.js\"\n\nimport BluError from \"../utils/bluError.js\"\nimport isSubclass from \"../utils/isSubclass.js\"\n\nclass Configuration {\n\t#scannerConfig\n\t#deviceType\n\t#ensureCompleteDeviceBluetoothInterface\n\t#autoListenToNotifiableCharacteristics\n\n\tconstructor() {\n\t\tthis.restoreDefaults()\n\t}\n\n\tget scannerConfig() {\n\t\treturn this.#scannerConfig\n\t}\n\n\tget deviceType() {\n\t\treturn this.#deviceType\n\t}\n\n\tget ensureCompleteDeviceBluetoothInterface() {\n\t\treturn this.#ensureCompleteDeviceBluetoothInterface\n\t}\n\n\tget autoListenToNotifiableCharacteristics() {\n\t\treturn this.#autoListenToNotifiableCharacteristics\n\t}\n\n\trestoreDefaults() {\n\t\tthis.#scannerConfig = { acceptAllDevices: true }\n\t\tthis.#deviceType = Device\n\t\tthis.#ensureCompleteDeviceBluetoothInterface = true\n\t\tthis.#autoListenToNotifiableCharacteristics = true\n\t}\n\n\tuse(scannerConfig, deviceType) {\n\t\tif (scannerConfig) {\n\t\t\tthis.useScannerConfig(scannerConfig)\n\t\t}\n\n\t\tif (deviceType) {\n\t\t\tthis.useDeviceType(deviceType)\n\t\t}\n\t}\n\n\tuseScannerConfig(scannerConfig) {\n\t\tif (typeof scannerConfig !== \"object\") {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"scannerConfig\" must be an object.`\n\t\t\t)\n\t\t}\n\n\t\t// TODO: Validate scannerConfig here once it is typed.\n\t\t// See: https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth/requestDevice#parameters\n\n\t\tthis.#scannerConfig = scannerConfig\n\t}\n\n\tuseDeviceType(deviceType) {\n\t\tif (!isSubclass(deviceType, Device)) {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"deviceType\" must be ` +\n\t\t\t\t`a class that is or extends \"Device\".`\n\t\t\t)\n\t\t}\n\n\t\tthis.#deviceType = deviceType\n\t}\n\n\tset(configuration) {\n\t\tif (typeof configuration !== \"object\") {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"configuration\" must be an object.`\n\t\t\t)\n\t\t}\n\n\t\tif (\n\t\t\tObject.getOwnPropertyNames(configuration).every(propertyName => {\n\t\t\t\treturn [\n\t\t\t\t\t\"ensureCompleteDeviceBluetoothInterface\",\n\t\t\t\t\t\"autoListenToNotifiableCharacteristics\"\n\t\t\t\t]\n\t\t\t\t.includes(propertyName)\n\t\t\t})\n\t\t) {\n\t\t\tif (Object.hasOwn(configuration, \"ensureCompleteDeviceBluetoothInterface\")) {\n\t\t\t\tif (typeof configuration.ensureCompleteDeviceBluetoothInterface !== \"boolean\") {\n\t\t\t\t\tthrow new BluConfigurationError(\n\t\t\t\t\t\t`Configuration property \"ensureCompleteDeviceBluetoothInterface\" ` +\n\t\t\t\t\t\t`must be of type \"boolean\".`\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.#ensureCompleteDeviceBluetoothInterface =\n\t\t\t\t\tconfiguration.ensureCompleteDeviceBluetoothInterface\n\t\t\t}\n\n\t\t\tif (Object.hasOwn(configuration, \"autoListenToNotifiableCharacteristics\")) {\n\t\t\t\tif (typeof configuration.autoListenToNotifiableCharacteristics !== \"boolean\") {\n\t\t\t\t\tthrow new BluConfigurationError(\n\t\t\t\t\t\t`Configuration property \"autoListenToNotifiableCharacteristics\" ` +\n\t\t\t\t\t\t`must be of type \"boolean\".`\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.#autoListenToNotifiableCharacteristics =\n\t\t\t\t\tconfiguration.autoListenToNotifiableCharacteristics\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthrow new BluConfigurationError(\n\t\t\t\t`Argument \"configuration\" must contain an object with valid configuration options.`\n\t\t\t)\n\t\t}\n\t}\n}\n\nclass BluConfigurationError extends BluError {}\n\nexport default new Configuration()","import bluetooth from \"./bluetooth.js\"\nimport configuration from \"./configuration.js\"\n\nimport BluError from \"../utils/bluError.js\"\n\nclass Scanner {\n\tgetDevice() {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (!bluetooth.isSupported) {\n\t\t\t\treject(\n\t\t\t\t\tnew BluError(\n\t\t\t\t\t\t\"Blu is not compatible with this browser.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet device = await globalThis.navigator.bluetooth.requestDevice(\n\t\t\t\t\tconfiguration.scannerConfig\n\t\t\t\t)\n\n\t\t\t\tdevice = device === undefined ? null : new configuration.deviceType(device)\n\n\t\t\t\tresolve(device)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\tif (error.name === \"NotFoundError\") {\n\t\t\t\t\t// Device chooser has been closed on the client side.\n\t\t\t\t\tresolve(null)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew ScannerError(\"An error occurred.\", error)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetPairedDevices() {\n\t\t// Experimental feature.\n\t\t// Compatibility: https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth/getDevices#browser_compatibility\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (typeof globalThis.navigator?.bluetooth?.getDevices !== \"function\") {\n\t\t\t\treject(\n\t\t\t\t\tnew ScannerError(\n\t\t\t\t\t\t\"This feature is not supported by this browser.\"\n\t\t\t\t\t)\n\t\t\t\t)\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet devices = await globalThis.navigator.bluetooth.getDevices()\n\n\t\t\t\tresolve(devices)\n\t\t\t}\n\t\t\tcatch(error) {\n\t\t\t\treject(\n\t\t\t\t\tnew ScannerError(\"An error occurred.\", error)\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}\n}\n\nclass ScannerError extends BluError {}\n\nexport default new Scanner()","import bluetooth from \"./src/bluetooth.js\"\nimport configuration from \"./src/configuration.js\"\nimport logger from \"./src/logger.js\"\nimport scanner from \"./src/scanner.js\"\nimport { version } from \"./src/version.js\"\n\nimport {\n\tServiceDescription,\n\tCharacteristicDescription,\n\tDescriptorDescription\n} from \"./src/descriptions.js\"\nimport Service from \"./src/service.js\"\nimport Characteristic from \"./src/characteristic.js\"\nimport Descriptor from \"./src/descriptor.js\"\nimport Request from \"./src/request.js\"\nimport Response from \"./src/response.js\"\nimport Device from \"./src/device.js\"\n\nimport BluError from \"./utils/bluError.js\"\n\nexport { default as bluetooth } from \"./src/bluetooth.js\"\nexport { default as configuration } from \"./src/configuration.js\"\nexport { default as logger } from \"./src/logger.js\"\nexport { default as scanner } from \"./src/scanner.js\"\nexport { version } from \"./src/version.js\"\n\nexport {\n\tServiceDescription,\n\tCharacteristicDescription,\n\tDescriptorDescription\n} from \"./src/descriptions.js\"\nexport { default as Service } from \"./src/service.js\"\nexport { default as Characteristic } from \"./src/characteristic.js\"\nexport { default as Descriptor } from \"./src/descriptor.js\"\nexport { default as Request } from \"./src/request.js\"\nexport { default as Response } from \"./src/response.js\"\nexport { default as Device } from \"./src/device.js\"\n\nexport { default as BluError } from \"./utils/bluError.js\"\n\nexport default {\n\tbluetooth: bluetooth,\n\tconfiguration: configuration,\n\tlogger: logger,\n\tscanner: scanner,\n\tversion: version,\n\n\tServiceDescription: ServiceDescription,\n\tCharacteristicDescription: CharacteristicDescription,\n\tDescriptorDescription: DescriptorDescription,\n\tService: Service,\n\tCharacteristic: Characteristic,\n\tDescriptor: Descriptor,\n\tDevice: Device,\n\tRequest: Request,\n\tResponse: Response,\n\n\tBluError: BluError\n}","// Generated by genversion.\nexport const version = \"1.4.1\"\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","BluError","Error","constructor","message","underlyingError","super","cause","captureStackTrace","this","name","DateFormatter","Intl","DateTimeFormat","hour12","hour","minute","second","fractionalSecondDigits","LoggerError","Logger","includeTimestamps","includeLevelNames","console","isEnabled","target","enable","warn","disable","setPrefix","prefix","setLevel","level","includes","setTarget","consoleLike","log","debug","error","origin","format","Date","now","length","EventEmitter","Map","Set","strictMode","EventEmitterError","emit","channel","payload","has","set","logger","callback","on","add","once","onceCallback","off","muteChannel","unmuteChannel","delete","addChannel","removeChannel","removeAllListeners","undefined","clear","Bluetooth","isSupported","globalThis","navigator","bluetooth","addEventListener","event","value","device","isDataTransferLoggingEnabled","connectedDevices","Array","from","connectedDevice","isAvailable","Promise","resolve","getAvailability","then","available","enableDataTransferLogging","disableDataTransferLogging","Service","description","characteristics","_bluetoothService","bluetoothService","uuid","async","isTypedArray","subject","ArrayBuffer","isView","Response","data","ResponseConstructionError","static","response","Request","responseType","RequestConstructionError","every","entry","Uint8Array","isArray","Characteristic","service","properties","descriptors","_bluetoothCharacteristic","bluetoothCharacteristic","CharacteristicProperties","hasExpectedProperties","string","expectedIndicators","readValue","reject","read","performGATTOperation","CharacteristicOperationError","responseProperty","write","withoutResponse","writeWithoutResponse","writeValueWithoutResponse","writeValueWithResponse","request","timeout","REQUEST_TIMEOUT","onResponse","validatorFunction","clearTimeout","timeoutTimer","setTimeout","NotificationTimeoutError","catch","requestAll","requests","responses","push","startListeningForNotifications","notify","startNotifications","bind","isListening","stopListeningForNotifications","stopNotifications","removeEventListener","bluetoothCharacteristicProperties","toString","join","characteristic","Descriptor","_bluetoothDescriptor","bluetoothDescriptor","DescriptorOperationError","writeValue","descriptor","GATTOperationQueue","isBusy","await","GATTOperationQueueError","GATTOperationError","finally","isSubclass","classToTest","Description","identifier","DescriptionConstructionError","toLowerCase","ServiceDescription","type","characteristicDescriptions","ServiceDescriptionConstructionError","characteristicDescription","CharacteristicDescription","descriptorDescriptions","CharacteristicDescriptionConstructionError","descriptorDescription","DescriptorDescription","match","DescriptorDescriptionConstructionError","Device","id","services","serviceDescriptions","_bluetoothDevice","bluetoothDevice","isConnected","gatt","connected","connect","DeviceConnectionError","onceReady","disconnect","watchAdvertisements","DeviceOperationError","interfaceIncomplete","serviceDescription","getPrimaryService","getCharacteristic","getDescriptor","configuration","ensureCompleteDeviceBluetoothInterface","DeviceBluetoothInterfaceIncompleteError","getPrimaryServices","find","describedService","getCharacteristics","describedCharacteristic","getDescriptors","DescriptorDiscoveryError","describedDescriptor","autoListenToNotifiableCharacteristics","DeviceBluetoothInterfaceDiscoveryError","BluConfigurationError","Configuration","restoreDefaults","scannerConfig","deviceType","acceptAllDevices","use","useScannerConfig","useDeviceType","getOwnPropertyNames","propertyName","hasOwn","ScannerError","Scanner","getDevice","requestDevice","getPairedDevices","getDevices","scanner","version"],"sourceRoot":""}